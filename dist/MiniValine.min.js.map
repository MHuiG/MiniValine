{"version":3,"sources":["webpack://MiniValine/webpack/universalModuleDefinition","webpack://MiniValine/webpack/bootstrap","webpack://MiniValine/./src/Default.js","webpack://MiniValine/./src/utils/ajax.js","webpack://MiniValine/./node_modules/cssfilter/lib/index.js","webpack://MiniValine/./node_modules/xss/lib/util.js","webpack://MiniValine/./node_modules/xss/lib/default.js","webpack://MiniValine/./node_modules/cssfilter/lib/default.js","webpack://MiniValine/./node_modules/cssfilter/lib/util.js","webpack://MiniValine/./node_modules/xss/lib/parser.js","webpack://MiniValine/./src/index.js","webpack://MiniValine/./src/MiniValine.js","webpack://MiniValine/./src/body/index.js","webpack://MiniValine/./src/body/vcard.js","webpack://MiniValine/./src/utils/timeago.js","webpack://MiniValine/./src/body/loading.js","webpack://MiniValine/./src/body/smiles.js","webpack://MiniValine/./src/body/el.js","webpack://MiniValine/./src/body/ele.js","webpack://MiniValine/./node_modules/string-format/index.js","webpack://MiniValine/./src/utils/index.js","webpack://MiniValine/./src/utils/Config.js","webpack://MiniValine/./src/utils/i18n.js","webpack://MiniValine/./src/utils/GetIP.js","webpack://MiniValine/./src/utils/setAV.js","webpack://MiniValine/./src/utils/dom.js","webpack://MiniValine/./src/utils/MathJax.js","webpack://MiniValine/./src/utils/check.js","webpack://MiniValine/./src/utils/smile.js","webpack://MiniValine/./src/utils/script.js","webpack://MiniValine/./src/utils/MakeComment.js","webpack://MiniValine/./node_modules/xss/lib/index.js","webpack://MiniValine/./node_modules/cssfilter/lib/css.js","webpack://MiniValine/./node_modules/cssfilter/lib/parser.js","webpack://MiniValine/./node_modules/xss/lib/xss.js"],"names":["root","factory","exports","module","define","amd","window","webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","i","resolves","length","Object","prototype","hasOwnProperty","call","installedChunks","push","modules","parentJsonpFunction","shift","installedModules","2","__webpack_require__","l","e","promises","installedChunkData","promise","Promise","resolve","reject","onScriptComplete","script","document","createElement","charset","timeout","nc","setAttribute","src","p","jsonpScriptSrc","error","Error","event","onerror","onload","clearTimeout","chunk","errorType","type","realSrc","target","message","name","request","undefined","setTimeout","head","appendChild","all","m","c","d","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","oe","err","console","jsonpArray","oldJsonpFunction","slice","s","AVSdkUrl","GravatarBaseUrl","MD5","lazysizes","ip","DefaultEmailHash","EmoticonUrl","i18nUrl","MaxNestLevel","PageSize","Comment","comment","rid","at","nick","mail","link","ua","navigator","userAgent","url","location","pathname","pin","formatParams","arr","encodeURIComponent","Math","random","replace","join","options","toUpperCase","dataType","params","XMLHttpRequest","xhr","ActiveXObject","onreadystatechange","readyState","status","success","responseText","responseXML","fail","open","send","setRequestHeader","DEFAULT","FilterCSS","html","process","filterCSS","indexOf","item","j","Array","forEach","fn","scope","trim","str","String","spaceIndex","match","exec","index","getDefaultCSSWhiteList","getDefaultWhiteList","_","a","abbr","address","area","article","aside","audio","b","bdi","bdo","big","blockquote","br","caption","center","cite","code","col","colgroup","dd","del","details","div","dl","dt","em","font","footer","h1","h2","h3","h4","h5","h6","header","hr","img","ins","li","mark","nav","ol","pre","section","small","span","sub","sup","strong","table","tbody","td","tfoot","th","thead","tr","tt","u","ul","video","defaultCSSFilter","escapeHtml","REGEXP_LT","REGEXP_GT","REGEXP_QUOTE","REGEXP_QUOTE_2","REGEXP_ATTR_VALUE_1","REGEXP_ATTR_VALUE_COLON","REGEXP_ATTR_VALUE_NEWLINE","REGEXP_DEFAULT_ON_TAG_ATTR_4","REGEXP_DEFAULT_ON_TAG_ATTR_7","REGEXP_DEFAULT_ON_TAG_ATTR_8","escapeQuote","unescapeQuote","escapeHtmlEntities","fromCharCode","parseInt","substr","escapeDangerHtml5Entities","clearNonPrintableCharacter","str2","len","charCodeAt","charAt","friendlyAttrValue","escapeAttrValue","STRIP_COMMENT_TAG_REGEXP","whiteList","onTag","tag","onIgnoreTag","onTagAttr","onIgnoreTagAttr","safeAttrValue","cssFilter","lastIndex","test","onIgnoreTagStripAll","StripTagBody","tags","next","isRemoveAllTag","isArray","removeList","posStart","isRemoveTag","isClosing","ret","end","position","remove","rethtml","lastPos","pos","stripCommentTag","stripBlankChar","chars","split","filter","char","REGEXP_URL_JAVASCRIPT","onAttr","onIgnoreAttr","trimRight","getTagName","tagName","toLowerCase","REGEXP_ILLEGAL_ATTR_NAME","findNextEqual","findBeforeEqual","stripQuoteWrap","text","isQuoteWrapString","parseTag","tagStart","quoteStart","currentPos","currentTagName","currentHtml","parseAttr","retAttrs","tmpName","addAttr","MiniValine","option","MiniValineFactory","this","config","util","Config","i18n","smile","GetIP","initCheck","check","setInterval","md5","AV","clearInterval","initBody","body","el","loading","nodata","show","checksmiles","emoticonList","smiles","setAV","ex","log","hide","querySelector","alert","innerHTML","vbtns","cBtn","ctxt","cancel","oBtn","otxt","addEventListener","ok","dom","on","cb","query1","v","Query","equalTo","query2","query","or","notEqualTo","count","then","vsmiles","textField","imgSrc","decodeURI","selection","focus","createRange","selectionStart","startPos","endPos","selectionEnd","cursorPos","substring","submitBtn","getAttribute","removeAttribute","commentTrigger","reset","expandEvt","offsetHeight","classList","add","num","parentCount","doCloudQuery","parentQuery","pageNum","cq","pageSize","rets","results","parentVcard","insertComment","nestQuery","vpage","more","vmore","MathJaxSupport","vcard","level","vchild","_vlist","_id","maxNestLevel","showChildrenWrapper","showChildren","vl","vlist","top","_vcard","id","_vlis","querySelectorAll","_as","insertBefore","_vcontent","bindAtEvt","mapping","veditor","vnick","vlink","vmail","inputs","_v","_el","getCache","localStorage","getItem","JSON","parse","k","smileicons","previewText","smileBtn","previewBtn","render","md","markdown","MakeComment","commitEvt","submitting","acl","extend","set","setACL","ACL","setPublicReadAccess","setPublicWriteAccess","save","commentItem","setItem","stringify","_count","innerText","Number","_vat","mailRet","linkRet","inputTips","confirm","emailHash","gravatarUrl","reply","adminEmailMd5","dateFormat","date","vDay","padWithZeros","getDate","vMonth","getMonth","vYear","getFullYear","vNumber","width","numAsString","toString","oldTime","getTime","diffValue","Date","days","floor","leave1","hours","leave2","minutes","leave3","seconds","round","now","vempty","txt","noCommentYet","spinner","vloading","vsubmitting","smileWrapper","smileNames","emoticonUrl","cancelReply","placeholder","preview","emoji","commentCount","global","ValueError","transformers","template","args","arguments","idx","state","literal","_key","xf","path","concat","reduce","maybe","x","format","$format","unshift","apply","ajax","lang","language","userLanguage","maxNest","math","eval","getIP","json","serverURLs","prefix","appId","disableAVInit","init","appKey","utils","handler","capture","off","attachEvent","removeEventListener","detachEvent","MathJax","initMathJax","Hub","Typeset","getElementsByClassName","getScript","append","tmp","isWhiteAttr","xss","parser","FilterXSS","filterXSS","self","DedicatedWorkerGlobalScope","parseStyle","isNull","obj","shallowCopyObject","css","sourcePosition","source","isWhite","RegExp","opts","cssLength","isParenthesisOpen","retCSS","addNewAttr","stripIgnoreTag","allowCommentTag","stripIgnoreTagBody","retHtml","info","attrs","closing","getAttrs","whiteAttrList","attrsHtml"],"mappings":"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","file":"MiniValine.min.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"MiniValine\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"MiniValine\"] = factory();\n\telse\n\t\troot[\"MiniValine\"] = factory();\n})(window, function() {\nreturn "," \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t};\n\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t2: 0\n \t};\n\n\n\n \t// script path function\n \tfunction jsonpScriptSrc(chunkId) {\n \t\treturn __webpack_require__.p + \"\" + ({}[chunkId]||chunkId) + \".min.js\"\n \t}\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n \t// This file contains only the entry chunk.\n \t// The chunk loading function for additional chunks\n \t__webpack_require__.e = function requireEnsure(chunkId) {\n \t\tvar promises = [];\n\n\n \t\t// JSONP chunk loading for javascript\n\n \t\tvar installedChunkData = installedChunks[chunkId];\n \t\tif(installedChunkData !== 0) { // 0 means \"already installed\".\n\n \t\t\t// a Promise means \"currently loading\".\n \t\t\tif(installedChunkData) {\n \t\t\t\tpromises.push(installedChunkData[2]);\n \t\t\t} else {\n \t\t\t\t// setup Promise in chunk cache\n \t\t\t\tvar promise = new Promise(function(resolve, reject) {\n \t\t\t\t\tinstalledChunkData = installedChunks[chunkId] = [resolve, reject];\n \t\t\t\t});\n \t\t\t\tpromises.push(installedChunkData[2] = promise);\n\n \t\t\t\t// start chunk loading\n \t\t\t\tvar script = document.createElement('script');\n \t\t\t\tvar onScriptComplete;\n\n \t\t\t\tscript.charset = 'utf-8';\n \t\t\t\tscript.timeout = 120;\n \t\t\t\tif (__webpack_require__.nc) {\n \t\t\t\t\tscript.setAttribute(\"nonce\", __webpack_require__.nc);\n \t\t\t\t}\n \t\t\t\tscript.src = jsonpScriptSrc(chunkId);\n\n \t\t\t\t// create error before stack unwound to get useful stacktrace later\n \t\t\t\tvar error = new Error();\n \t\t\t\tonScriptComplete = function (event) {\n \t\t\t\t\t// avoid mem leaks in IE.\n \t\t\t\t\tscript.onerror = script.onload = null;\n \t\t\t\t\tclearTimeout(timeout);\n \t\t\t\t\tvar chunk = installedChunks[chunkId];\n \t\t\t\t\tif(chunk !== 0) {\n \t\t\t\t\t\tif(chunk) {\n \t\t\t\t\t\t\tvar errorType = event && (event.type === 'load' ? 'missing' : event.type);\n \t\t\t\t\t\t\tvar realSrc = event && event.target && event.target.src;\n \t\t\t\t\t\t\terror.message = 'Loading chunk ' + chunkId + ' failed.\\n(' + errorType + ': ' + realSrc + ')';\n \t\t\t\t\t\t\terror.name = 'ChunkLoadError';\n \t\t\t\t\t\t\terror.type = errorType;\n \t\t\t\t\t\t\terror.request = realSrc;\n \t\t\t\t\t\t\tchunk[1](error);\n \t\t\t\t\t\t}\n \t\t\t\t\t\tinstalledChunks[chunkId] = undefined;\n \t\t\t\t\t}\n \t\t\t\t};\n \t\t\t\tvar timeout = setTimeout(function(){\n \t\t\t\t\tonScriptComplete({ type: 'timeout', target: script });\n \t\t\t\t}, 120000);\n \t\t\t\tscript.onerror = script.onload = onScriptComplete;\n \t\t\t\tdocument.head.appendChild(script);\n \t\t\t}\n \t\t}\n \t\treturn Promise.all(promises);\n \t};\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/dist/\";\n\n \t// on error function for async loading\n \t__webpack_require__.oe = function(err) { console.error(err); throw err; };\n\n \tvar jsonpArray = window[\"webpackJsonpMiniValine\"] = window[\"webpackJsonpMiniValine\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 9);\n","export const AVSdkUrl = 'https://cdn.jsdelivr.net/npm/leancloud-storage@3/dist/av-min.js'\r\nexport const GravatarBaseUrl = 'https://gravatar.loli.net/avatar/'\r\nexport const MD5 = 'https://cdn.jsdelivr.net/gh/MHuiG/mhuig.github.io/libs/md5/md5.min.js'\r\nexport const lazysizes = 'https://cdn.jsdelivr.net/npm/lazysizes/lazysizes.min.js'\r\nexport const ip = 'https://api.ip.sb/jsonip?callback=getIP'\r\nexport const DefaultEmailHash = '9e63c80900d106cbbec5a9f4ea433a3e'\r\nexport const EmoticonUrl = 'https://cdn.jsdelivr.net/npm/alus'\r\nexport const i18nUrl = 'https://cdn.jsdelivr.net/gh/MiniValine/minivaline-i18n@master/'\r\nexport const MaxNestLevel = 3\r\nexport const PageSize = 6\r\nexport const Comment = {\r\n  ip: '',\r\n  comment: '',\r\n  rid: '',\r\n  at: '',\r\n  nick: '',\r\n  mail: '',\r\n  link: '',\r\n  ua: navigator.userAgent,\r\n  url: location.pathname,\r\n  pin: 0\r\n}\n","const ajax = (options) => {\r\n  options = options || {}\r\n  options.type = (options.type || 'GET').toUpperCase()\r\n  options.dataType = options.dataType || 'json'\r\n  var params = formatParams(options.data)\r\n  if (window.XMLHttpRequest) {\r\n    var xhr = new XMLHttpRequest()\r\n  } else {\r\n    xhr = new ActiveXObject('Microsoft.XMLHTTP')\r\n  }\r\n  xhr.onreadystatechange = function () {\r\n    if (xhr.readyState == 4) {\r\n      var status = xhr.status\r\n      if (status >= 200 && status < 300) {\r\n        options.success && options.success(xhr.responseText, xhr.responseXML)\r\n      } else {\r\n        options.fail && options.fail(status)\r\n      }\r\n    }\r\n  }\r\n  if (options.type == 'GET') {\r\n    xhr.open('GET', options.url + '?' + params, true)\r\n    xhr.send(null)\r\n  } else if (options.type == 'POST') {\r\n    xhr.open('POST', options.url, true)\r\n    xhr.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded')\r\n    xhr.send(params)\r\n  }\r\n}\r\nconst formatParams = (data) => {\r\n  var arr = []\r\n  for (var name in data) {\r\n    arr.push(encodeURIComponent(name) + '=' + encodeURIComponent(data[name]))\r\n  }\r\n  arr.push(('v=' + Math.random()).replace('.', ''))\r\n  return arr.join('&')\r\n}\r\nmodule.exports = ajax\n","/**\n * cssfilter\n *\n * @author <leizongmin@gmail.com>\n */\n\nvar DEFAULT = require('./default');\nvar FilterCSS = require('./css');\n\n\n/**\n * XSS\n *\n * @param {String} css CSS\n * @param {Object} options whiteList, onAttr, onIgnoreAttr\n * @return {String}\n */\nfunction filterCSS (html, options) {\n  var xss = new FilterCSS(options);\n  return xss.process(html);\n}\n\n\n// \nexports = module.exports = filterCSS;\nexports.FilterCSS = FilterCSS;\nfor (var i in DEFAULT) exports[i] = DEFAULT[i];\n\n// \nif (typeof window !== 'undefined') {\n  window.filterCSS = module.exports;\n}\n","module.exports = {\n  indexOf: function(arr, item) {\n    var i, j;\n    if (Array.prototype.indexOf) {\n      return arr.indexOf(item);\n    }\n    for (i = 0, j = arr.length; i < j; i++) {\n      if (arr[i] === item) {\n        return i;\n      }\n    }\n    return -1;\n  },\n  forEach: function(arr, fn, scope) {\n    var i, j;\n    if (Array.prototype.forEach) {\n      return arr.forEach(fn, scope);\n    }\n    for (i = 0, j = arr.length; i < j; i++) {\n      fn.call(scope, arr[i], i, arr);\n    }\n  },\n  trim: function(str) {\n    if (String.prototype.trim) {\n      return str.trim();\n    }\n    return str.replace(/(^\\s*)|(\\s*$)/g, \"\");\n  },\n  spaceIndex: function(str) {\n    var reg = /\\s|\\n|\\t/;\n    var match = reg.exec(str);\n    return match ? match.index : -1;\n  }\n};\n","/**\n * default settings\n *\n * @author Zongmin Lei<leizongmin@gmail.com>\n */\n\nvar FilterCSS = require(\"cssfilter\").FilterCSS;\nvar getDefaultCSSWhiteList = require(\"cssfilter\").getDefaultWhiteList;\nvar _ = require(\"./util\");\n\nfunction getDefaultWhiteList() {\n  return {\n    a: [\"target\", \"href\", \"title\"],\n    abbr: [\"title\"],\n    address: [],\n    area: [\"shape\", \"coords\", \"href\", \"alt\"],\n    article: [],\n    aside: [],\n    audio: [\"autoplay\", \"controls\", \"loop\", \"preload\", \"src\"],\n    b: [],\n    bdi: [\"dir\"],\n    bdo: [\"dir\"],\n    big: [],\n    blockquote: [\"cite\"],\n    br: [],\n    caption: [],\n    center: [],\n    cite: [],\n    code: [],\n    col: [\"align\", \"valign\", \"span\", \"width\"],\n    colgroup: [\"align\", \"valign\", \"span\", \"width\"],\n    dd: [],\n    del: [\"datetime\"],\n    details: [\"open\"],\n    div: [],\n    dl: [],\n    dt: [],\n    em: [],\n    font: [\"color\", \"size\", \"face\"],\n    footer: [],\n    h1: [],\n    h2: [],\n    h3: [],\n    h4: [],\n    h5: [],\n    h6: [],\n    header: [],\n    hr: [],\n    i: [],\n    img: [\"src\", \"alt\", \"title\", \"width\", \"height\"],\n    ins: [\"datetime\"],\n    li: [],\n    mark: [],\n    nav: [],\n    ol: [],\n    p: [],\n    pre: [],\n    s: [],\n    section: [],\n    small: [],\n    span: [],\n    sub: [],\n    sup: [],\n    strong: [],\n    table: [\"width\", \"border\", \"align\", \"valign\"],\n    tbody: [\"align\", \"valign\"],\n    td: [\"width\", \"rowspan\", \"colspan\", \"align\", \"valign\"],\n    tfoot: [\"align\", \"valign\"],\n    th: [\"width\", \"rowspan\", \"colspan\", \"align\", \"valign\"],\n    thead: [\"align\", \"valign\"],\n    tr: [\"rowspan\", \"align\", \"valign\"],\n    tt: [],\n    u: [],\n    ul: [],\n    video: [\"autoplay\", \"controls\", \"loop\", \"preload\", \"src\", \"height\", \"width\"]\n  };\n}\n\nvar defaultCSSFilter = new FilterCSS();\n\n/**\n * default onTag function\n *\n * @param {String} tag\n * @param {String} html\n * @param {Object} options\n * @return {String}\n */\nfunction onTag(tag, html, options) {\n  // do nothing\n}\n\n/**\n * default onIgnoreTag function\n *\n * @param {String} tag\n * @param {String} html\n * @param {Object} options\n * @return {String}\n */\nfunction onIgnoreTag(tag, html, options) {\n  // do nothing\n}\n\n/**\n * default onTagAttr function\n *\n * @param {String} tag\n * @param {String} name\n * @param {String} value\n * @return {String}\n */\nfunction onTagAttr(tag, name, value) {\n  // do nothing\n}\n\n/**\n * default onIgnoreTagAttr function\n *\n * @param {String} tag\n * @param {String} name\n * @param {String} value\n * @return {String}\n */\nfunction onIgnoreTagAttr(tag, name, value) {\n  // do nothing\n}\n\n/**\n * default escapeHtml function\n *\n * @param {String} html\n */\nfunction escapeHtml(html) {\n  return html.replace(REGEXP_LT, \"&lt;\").replace(REGEXP_GT, \"&gt;\");\n}\n\n/**\n * default safeAttrValue function\n *\n * @param {String} tag\n * @param {String} name\n * @param {String} value\n * @param {Object} cssFilter\n * @return {String}\n */\nfunction safeAttrValue(tag, name, value, cssFilter) {\n  // unescape attribute value firstly\n  value = friendlyAttrValue(value);\n\n  if (name === \"href\" || name === \"src\") {\n    // filter `href` and `src` attribute\n    // only allow the value that starts with `http://` | `https://` | `mailto:` | `/` | `#`\n    value = _.trim(value);\n    if (value === \"#\") return \"#\";\n    if (\n      !(\n        value.substr(0, 7) === \"http://\" ||\n        value.substr(0, 8) === \"https://\" ||\n        value.substr(0, 7) === \"mailto:\" ||\n        value.substr(0, 4) === \"tel:\" ||\n        value[0] === \"#\" ||\n        value[0] === \"/\"\n      )\n    ) {\n      return \"\";\n    }\n  } else if (name === \"background\") {\n    // filter `background` attribute (maybe no use)\n    // `javascript:`\n    REGEXP_DEFAULT_ON_TAG_ATTR_4.lastIndex = 0;\n    if (REGEXP_DEFAULT_ON_TAG_ATTR_4.test(value)) {\n      return \"\";\n    }\n  } else if (name === \"style\") {\n    // `expression()`\n    REGEXP_DEFAULT_ON_TAG_ATTR_7.lastIndex = 0;\n    if (REGEXP_DEFAULT_ON_TAG_ATTR_7.test(value)) {\n      return \"\";\n    }\n    // `url()`\n    REGEXP_DEFAULT_ON_TAG_ATTR_8.lastIndex = 0;\n    if (REGEXP_DEFAULT_ON_TAG_ATTR_8.test(value)) {\n      REGEXP_DEFAULT_ON_TAG_ATTR_4.lastIndex = 0;\n      if (REGEXP_DEFAULT_ON_TAG_ATTR_4.test(value)) {\n        return \"\";\n      }\n    }\n    if (cssFilter !== false) {\n      cssFilter = cssFilter || defaultCSSFilter;\n      value = cssFilter.process(value);\n    }\n  }\n\n  // escape `<>\"` before returns\n  value = escapeAttrValue(value);\n  return value;\n}\n\n// RegExp list\nvar REGEXP_LT = /</g;\nvar REGEXP_GT = />/g;\nvar REGEXP_QUOTE = /\"/g;\nvar REGEXP_QUOTE_2 = /&quot;/g;\nvar REGEXP_ATTR_VALUE_1 = /&#([a-zA-Z0-9]*);?/gim;\nvar REGEXP_ATTR_VALUE_COLON = /&colon;?/gim;\nvar REGEXP_ATTR_VALUE_NEWLINE = /&newline;?/gim;\nvar REGEXP_DEFAULT_ON_TAG_ATTR_3 = /\\/\\*|\\*\\//gm;\nvar REGEXP_DEFAULT_ON_TAG_ATTR_4 = /((j\\s*a\\s*v\\s*a|v\\s*b|l\\s*i\\s*v\\s*e)\\s*s\\s*c\\s*r\\s*i\\s*p\\s*t\\s*|m\\s*o\\s*c\\s*h\\s*a)\\:/gi;\nvar REGEXP_DEFAULT_ON_TAG_ATTR_5 = /^[\\s\"'`]*(d\\s*a\\s*t\\s*a\\s*)\\:/gi;\nvar REGEXP_DEFAULT_ON_TAG_ATTR_6 = /^[\\s\"'`]*(d\\s*a\\s*t\\s*a\\s*)\\:\\s*image\\//gi;\nvar REGEXP_DEFAULT_ON_TAG_ATTR_7 = /e\\s*x\\s*p\\s*r\\s*e\\s*s\\s*s\\s*i\\s*o\\s*n\\s*\\(.*/gi;\nvar REGEXP_DEFAULT_ON_TAG_ATTR_8 = /u\\s*r\\s*l\\s*\\(.*/gi;\n\n/**\n * escape doube quote\n *\n * @param {String} str\n * @return {String} str\n */\nfunction escapeQuote(str) {\n  return str.replace(REGEXP_QUOTE, \"&quot;\");\n}\n\n/**\n * unescape double quote\n *\n * @param {String} str\n * @return {String} str\n */\nfunction unescapeQuote(str) {\n  return str.replace(REGEXP_QUOTE_2, '\"');\n}\n\n/**\n * escape html entities\n *\n * @param {String} str\n * @return {String}\n */\nfunction escapeHtmlEntities(str) {\n  return str.replace(REGEXP_ATTR_VALUE_1, function replaceUnicode(str, code) {\n    return code[0] === \"x\" || code[0] === \"X\"\n      ? String.fromCharCode(parseInt(code.substr(1), 16))\n      : String.fromCharCode(parseInt(code, 10));\n  });\n}\n\n/**\n * escape html5 new danger entities\n *\n * @param {String} str\n * @return {String}\n */\nfunction escapeDangerHtml5Entities(str) {\n  return str\n    .replace(REGEXP_ATTR_VALUE_COLON, \":\")\n    .replace(REGEXP_ATTR_VALUE_NEWLINE, \" \");\n}\n\n/**\n * clear nonprintable characters\n *\n * @param {String} str\n * @return {String}\n */\nfunction clearNonPrintableCharacter(str) {\n  var str2 = \"\";\n  for (var i = 0, len = str.length; i < len; i++) {\n    str2 += str.charCodeAt(i) < 32 ? \" \" : str.charAt(i);\n  }\n  return _.trim(str2);\n}\n\n/**\n * get friendly attribute value\n *\n * @param {String} str\n * @return {String}\n */\nfunction friendlyAttrValue(str) {\n  str = unescapeQuote(str);\n  str = escapeHtmlEntities(str);\n  str = escapeDangerHtml5Entities(str);\n  str = clearNonPrintableCharacter(str);\n  return str;\n}\n\n/**\n * unescape attribute value\n *\n * @param {String} str\n * @return {String}\n */\nfunction escapeAttrValue(str) {\n  str = escapeQuote(str);\n  str = escapeHtml(str);\n  return str;\n}\n\n/**\n * `onIgnoreTag` function for removing all the tags that are not in whitelist\n */\nfunction onIgnoreTagStripAll() {\n  return \"\";\n}\n\n/**\n * remove tag body\n * specify a `tags` list, if the tag is not in the `tags` list then process by the specify function (optional)\n *\n * @param {array} tags\n * @param {function} next\n */\nfunction StripTagBody(tags, next) {\n  if (typeof next !== \"function\") {\n    next = function() {};\n  }\n\n  var isRemoveAllTag = !Array.isArray(tags);\n  function isRemoveTag(tag) {\n    if (isRemoveAllTag) return true;\n    return _.indexOf(tags, tag) !== -1;\n  }\n\n  var removeList = [];\n  var posStart = false;\n\n  return {\n    onIgnoreTag: function(tag, html, options) {\n      if (isRemoveTag(tag)) {\n        if (options.isClosing) {\n          var ret = \"[/removed]\";\n          var end = options.position + ret.length;\n          removeList.push([\n            posStart !== false ? posStart : options.position,\n            end\n          ]);\n          posStart = false;\n          return ret;\n        } else {\n          if (!posStart) {\n            posStart = options.position;\n          }\n          return \"[removed]\";\n        }\n      } else {\n        return next(tag, html, options);\n      }\n    },\n    remove: function(html) {\n      var rethtml = \"\";\n      var lastPos = 0;\n      _.forEach(removeList, function(pos) {\n        rethtml += html.slice(lastPos, pos[0]);\n        lastPos = pos[1];\n      });\n      rethtml += html.slice(lastPos);\n      return rethtml;\n    }\n  };\n}\n\n/**\n * remove html comments\n *\n * @param {String} html\n * @return {String}\n */\nfunction stripCommentTag(html) {\n  return html.replace(STRIP_COMMENT_TAG_REGEXP, \"\");\n}\nvar STRIP_COMMENT_TAG_REGEXP = /<!--[\\s\\S]*?-->/g;\n\n/**\n * remove invisible characters\n *\n * @param {String} html\n * @return {String}\n */\nfunction stripBlankChar(html) {\n  var chars = html.split(\"\");\n  chars = chars.filter(function(char) {\n    var c = char.charCodeAt(0);\n    if (c === 127) return false;\n    if (c <= 31) {\n      if (c === 10 || c === 13) return true;\n      return false;\n    }\n    return true;\n  });\n  return chars.join(\"\");\n}\n\nexports.whiteList = getDefaultWhiteList();\nexports.getDefaultWhiteList = getDefaultWhiteList;\nexports.onTag = onTag;\nexports.onIgnoreTag = onIgnoreTag;\nexports.onTagAttr = onTagAttr;\nexports.onIgnoreTagAttr = onIgnoreTagAttr;\nexports.safeAttrValue = safeAttrValue;\nexports.escapeHtml = escapeHtml;\nexports.escapeQuote = escapeQuote;\nexports.unescapeQuote = unescapeQuote;\nexports.escapeHtmlEntities = escapeHtmlEntities;\nexports.escapeDangerHtml5Entities = escapeDangerHtml5Entities;\nexports.clearNonPrintableCharacter = clearNonPrintableCharacter;\nexports.friendlyAttrValue = friendlyAttrValue;\nexports.escapeAttrValue = escapeAttrValue;\nexports.onIgnoreTagStripAll = onIgnoreTagStripAll;\nexports.StripTagBody = StripTagBody;\nexports.stripCommentTag = stripCommentTag;\nexports.stripBlankChar = stripBlankChar;\nexports.cssFilter = defaultCSSFilter;\nexports.getDefaultCSSWhiteList = getDefaultCSSWhiteList;\n","/**\n * cssfilter\n *\n * @author <leizongmin@gmail.com>\n */\n\nfunction getDefaultWhiteList () {\n  // \n  // true: \n  // Function: function (val) { } true\n  // RegExp: regexp.test(val) true\n  // \n  var whiteList = {};\n\n  whiteList['align-content'] = false; // default: auto\n  whiteList['align-items'] = false; // default: auto\n  whiteList['align-self'] = false; // default: auto\n  whiteList['alignment-adjust'] = false; // default: auto\n  whiteList['alignment-baseline'] = false; // default: baseline\n  whiteList['all'] = false; // default: depending on individual properties\n  whiteList['anchor-point'] = false; // default: none\n  whiteList['animation'] = false; // default: depending on individual properties\n  whiteList['animation-delay'] = false; // default: 0\n  whiteList['animation-direction'] = false; // default: normal\n  whiteList['animation-duration'] = false; // default: 0\n  whiteList['animation-fill-mode'] = false; // default: none\n  whiteList['animation-iteration-count'] = false; // default: 1\n  whiteList['animation-name'] = false; // default: none\n  whiteList['animation-play-state'] = false; // default: running\n  whiteList['animation-timing-function'] = false; // default: ease\n  whiteList['azimuth'] = false; // default: center\n  whiteList['backface-visibility'] = false; // default: visible\n  whiteList['background'] = true; // default: depending on individual properties\n  whiteList['background-attachment'] = true; // default: scroll\n  whiteList['background-clip'] = true; // default: border-box\n  whiteList['background-color'] = true; // default: transparent\n  whiteList['background-image'] = true; // default: none\n  whiteList['background-origin'] = true; // default: padding-box\n  whiteList['background-position'] = true; // default: 0% 0%\n  whiteList['background-repeat'] = true; // default: repeat\n  whiteList['background-size'] = true; // default: auto\n  whiteList['baseline-shift'] = false; // default: baseline\n  whiteList['binding'] = false; // default: none\n  whiteList['bleed'] = false; // default: 6pt\n  whiteList['bookmark-label'] = false; // default: content()\n  whiteList['bookmark-level'] = false; // default: none\n  whiteList['bookmark-state'] = false; // default: open\n  whiteList['border'] = true; // default: depending on individual properties\n  whiteList['border-bottom'] = true; // default: depending on individual properties\n  whiteList['border-bottom-color'] = true; // default: current color\n  whiteList['border-bottom-left-radius'] = true; // default: 0\n  whiteList['border-bottom-right-radius'] = true; // default: 0\n  whiteList['border-bottom-style'] = true; // default: none\n  whiteList['border-bottom-width'] = true; // default: medium\n  whiteList['border-collapse'] = true; // default: separate\n  whiteList['border-color'] = true; // default: depending on individual properties\n  whiteList['border-image'] = true; // default: none\n  whiteList['border-image-outset'] = true; // default: 0\n  whiteList['border-image-repeat'] = true; // default: stretch\n  whiteList['border-image-slice'] = true; // default: 100%\n  whiteList['border-image-source'] = true; // default: none\n  whiteList['border-image-width'] = true; // default: 1\n  whiteList['border-left'] = true; // default: depending on individual properties\n  whiteList['border-left-color'] = true; // default: current color\n  whiteList['border-left-style'] = true; // default: none\n  whiteList['border-left-width'] = true; // default: medium\n  whiteList['border-radius'] = true; // default: 0\n  whiteList['border-right'] = true; // default: depending on individual properties\n  whiteList['border-right-color'] = true; // default: current color\n  whiteList['border-right-style'] = true; // default: none\n  whiteList['border-right-width'] = true; // default: medium\n  whiteList['border-spacing'] = true; // default: 0\n  whiteList['border-style'] = true; // default: depending on individual properties\n  whiteList['border-top'] = true; // default: depending on individual properties\n  whiteList['border-top-color'] = true; // default: current color\n  whiteList['border-top-left-radius'] = true; // default: 0\n  whiteList['border-top-right-radius'] = true; // default: 0\n  whiteList['border-top-style'] = true; // default: none\n  whiteList['border-top-width'] = true; // default: medium\n  whiteList['border-width'] = true; // default: depending on individual properties\n  whiteList['bottom'] = false; // default: auto\n  whiteList['box-decoration-break'] = true; // default: slice\n  whiteList['box-shadow'] = true; // default: none\n  whiteList['box-sizing'] = true; // default: content-box\n  whiteList['box-snap'] = true; // default: none\n  whiteList['box-suppress'] = true; // default: show\n  whiteList['break-after'] = true; // default: auto\n  whiteList['break-before'] = true; // default: auto\n  whiteList['break-inside'] = true; // default: auto\n  whiteList['caption-side'] = false; // default: top\n  whiteList['chains'] = false; // default: none\n  whiteList['clear'] = true; // default: none\n  whiteList['clip'] = false; // default: auto\n  whiteList['clip-path'] = false; // default: none\n  whiteList['clip-rule'] = false; // default: nonzero\n  whiteList['color'] = true; // default: implementation dependent\n  whiteList['color-interpolation-filters'] = true; // default: auto\n  whiteList['column-count'] = false; // default: auto\n  whiteList['column-fill'] = false; // default: balance\n  whiteList['column-gap'] = false; // default: normal\n  whiteList['column-rule'] = false; // default: depending on individual properties\n  whiteList['column-rule-color'] = false; // default: current color\n  whiteList['column-rule-style'] = false; // default: medium\n  whiteList['column-rule-width'] = false; // default: medium\n  whiteList['column-span'] = false; // default: none\n  whiteList['column-width'] = false; // default: auto\n  whiteList['columns'] = false; // default: depending on individual properties\n  whiteList['contain'] = false; // default: none\n  whiteList['content'] = false; // default: normal\n  whiteList['counter-increment'] = false; // default: none\n  whiteList['counter-reset'] = false; // default: none\n  whiteList['counter-set'] = false; // default: none\n  whiteList['crop'] = false; // default: auto\n  whiteList['cue'] = false; // default: depending on individual properties\n  whiteList['cue-after'] = false; // default: none\n  whiteList['cue-before'] = false; // default: none\n  whiteList['cursor'] = false; // default: auto\n  whiteList['direction'] = false; // default: ltr\n  whiteList['display'] = true; // default: depending on individual properties\n  whiteList['display-inside'] = true; // default: auto\n  whiteList['display-list'] = true; // default: none\n  whiteList['display-outside'] = true; // default: inline-level\n  whiteList['dominant-baseline'] = false; // default: auto\n  whiteList['elevation'] = false; // default: level\n  whiteList['empty-cells'] = false; // default: show\n  whiteList['filter'] = false; // default: none\n  whiteList['flex'] = false; // default: depending on individual properties\n  whiteList['flex-basis'] = false; // default: auto\n  whiteList['flex-direction'] = false; // default: row\n  whiteList['flex-flow'] = false; // default: depending on individual properties\n  whiteList['flex-grow'] = false; // default: 0\n  whiteList['flex-shrink'] = false; // default: 1\n  whiteList['flex-wrap'] = false; // default: nowrap\n  whiteList['float'] = false; // default: none\n  whiteList['float-offset'] = false; // default: 0 0\n  whiteList['flood-color'] = false; // default: black\n  whiteList['flood-opacity'] = false; // default: 1\n  whiteList['flow-from'] = false; // default: none\n  whiteList['flow-into'] = false; // default: none\n  whiteList['font'] = true; // default: depending on individual properties\n  whiteList['font-family'] = true; // default: implementation dependent\n  whiteList['font-feature-settings'] = true; // default: normal\n  whiteList['font-kerning'] = true; // default: auto\n  whiteList['font-language-override'] = true; // default: normal\n  whiteList['font-size'] = true; // default: medium\n  whiteList['font-size-adjust'] = true; // default: none\n  whiteList['font-stretch'] = true; // default: normal\n  whiteList['font-style'] = true; // default: normal\n  whiteList['font-synthesis'] = true; // default: weight style\n  whiteList['font-variant'] = true; // default: normal\n  whiteList['font-variant-alternates'] = true; // default: normal\n  whiteList['font-variant-caps'] = true; // default: normal\n  whiteList['font-variant-east-asian'] = true; // default: normal\n  whiteList['font-variant-ligatures'] = true; // default: normal\n  whiteList['font-variant-numeric'] = true; // default: normal\n  whiteList['font-variant-position'] = true; // default: normal\n  whiteList['font-weight'] = true; // default: normal\n  whiteList['grid'] = false; // default: depending on individual properties\n  whiteList['grid-area'] = false; // default: depending on individual properties\n  whiteList['grid-auto-columns'] = false; // default: auto\n  whiteList['grid-auto-flow'] = false; // default: none\n  whiteList['grid-auto-rows'] = false; // default: auto\n  whiteList['grid-column'] = false; // default: depending on individual properties\n  whiteList['grid-column-end'] = false; // default: auto\n  whiteList['grid-column-start'] = false; // default: auto\n  whiteList['grid-row'] = false; // default: depending on individual properties\n  whiteList['grid-row-end'] = false; // default: auto\n  whiteList['grid-row-start'] = false; // default: auto\n  whiteList['grid-template'] = false; // default: depending on individual properties\n  whiteList['grid-template-areas'] = false; // default: none\n  whiteList['grid-template-columns'] = false; // default: none\n  whiteList['grid-template-rows'] = false; // default: none\n  whiteList['hanging-punctuation'] = false; // default: none\n  whiteList['height'] = true; // default: auto\n  whiteList['hyphens'] = false; // default: manual\n  whiteList['icon'] = false; // default: auto\n  whiteList['image-orientation'] = false; // default: auto\n  whiteList['image-resolution'] = false; // default: normal\n  whiteList['ime-mode'] = false; // default: auto\n  whiteList['initial-letters'] = false; // default: normal\n  whiteList['inline-box-align'] = false; // default: last\n  whiteList['justify-content'] = false; // default: auto\n  whiteList['justify-items'] = false; // default: auto\n  whiteList['justify-self'] = false; // default: auto\n  whiteList['left'] = false; // default: auto\n  whiteList['letter-spacing'] = true; // default: normal\n  whiteList['lighting-color'] = true; // default: white\n  whiteList['line-box-contain'] = false; // default: block inline replaced\n  whiteList['line-break'] = false; // default: auto\n  whiteList['line-grid'] = false; // default: match-parent\n  whiteList['line-height'] = false; // default: normal\n  whiteList['line-snap'] = false; // default: none\n  whiteList['line-stacking'] = false; // default: depending on individual properties\n  whiteList['line-stacking-ruby'] = false; // default: exclude-ruby\n  whiteList['line-stacking-shift'] = false; // default: consider-shifts\n  whiteList['line-stacking-strategy'] = false; // default: inline-line-height\n  whiteList['list-style'] = true; // default: depending on individual properties\n  whiteList['list-style-image'] = true; // default: none\n  whiteList['list-style-position'] = true; // default: outside\n  whiteList['list-style-type'] = true; // default: disc\n  whiteList['margin'] = true; // default: depending on individual properties\n  whiteList['margin-bottom'] = true; // default: 0\n  whiteList['margin-left'] = true; // default: 0\n  whiteList['margin-right'] = true; // default: 0\n  whiteList['margin-top'] = true; // default: 0\n  whiteList['marker-offset'] = false; // default: auto\n  whiteList['marker-side'] = false; // default: list-item\n  whiteList['marks'] = false; // default: none\n  whiteList['mask'] = false; // default: border-box\n  whiteList['mask-box'] = false; // default: see individual properties\n  whiteList['mask-box-outset'] = false; // default: 0\n  whiteList['mask-box-repeat'] = false; // default: stretch\n  whiteList['mask-box-slice'] = false; // default: 0 fill\n  whiteList['mask-box-source'] = false; // default: none\n  whiteList['mask-box-width'] = false; // default: auto\n  whiteList['mask-clip'] = false; // default: border-box\n  whiteList['mask-image'] = false; // default: none\n  whiteList['mask-origin'] = false; // default: border-box\n  whiteList['mask-position'] = false; // default: center\n  whiteList['mask-repeat'] = false; // default: no-repeat\n  whiteList['mask-size'] = false; // default: border-box\n  whiteList['mask-source-type'] = false; // default: auto\n  whiteList['mask-type'] = false; // default: luminance\n  whiteList['max-height'] = true; // default: none\n  whiteList['max-lines'] = false; // default: none\n  whiteList['max-width'] = true; // default: none\n  whiteList['min-height'] = true; // default: 0\n  whiteList['min-width'] = true; // default: 0\n  whiteList['move-to'] = false; // default: normal\n  whiteList['nav-down'] = false; // default: auto\n  whiteList['nav-index'] = false; // default: auto\n  whiteList['nav-left'] = false; // default: auto\n  whiteList['nav-right'] = false; // default: auto\n  whiteList['nav-up'] = false; // default: auto\n  whiteList['object-fit'] = false; // default: fill\n  whiteList['object-position'] = false; // default: 50% 50%\n  whiteList['opacity'] = false; // default: 1\n  whiteList['order'] = false; // default: 0\n  whiteList['orphans'] = false; // default: 2\n  whiteList['outline'] = false; // default: depending on individual properties\n  whiteList['outline-color'] = false; // default: invert\n  whiteList['outline-offset'] = false; // default: 0\n  whiteList['outline-style'] = false; // default: none\n  whiteList['outline-width'] = false; // default: medium\n  whiteList['overflow'] = false; // default: depending on individual properties\n  whiteList['overflow-wrap'] = false; // default: normal\n  whiteList['overflow-x'] = false; // default: visible\n  whiteList['overflow-y'] = false; // default: visible\n  whiteList['padding'] = true; // default: depending on individual properties\n  whiteList['padding-bottom'] = true; // default: 0\n  whiteList['padding-left'] = true; // default: 0\n  whiteList['padding-right'] = true; // default: 0\n  whiteList['padding-top'] = true; // default: 0\n  whiteList['page'] = false; // default: auto\n  whiteList['page-break-after'] = false; // default: auto\n  whiteList['page-break-before'] = false; // default: auto\n  whiteList['page-break-inside'] = false; // default: auto\n  whiteList['page-policy'] = false; // default: start\n  whiteList['pause'] = false; // default: implementation dependent\n  whiteList['pause-after'] = false; // default: implementation dependent\n  whiteList['pause-before'] = false; // default: implementation dependent\n  whiteList['perspective'] = false; // default: none\n  whiteList['perspective-origin'] = false; // default: 50% 50%\n  whiteList['pitch'] = false; // default: medium\n  whiteList['pitch-range'] = false; // default: 50\n  whiteList['play-during'] = false; // default: auto\n  whiteList['position'] = false; // default: static\n  whiteList['presentation-level'] = false; // default: 0\n  whiteList['quotes'] = false; // default: text\n  whiteList['region-fragment'] = false; // default: auto\n  whiteList['resize'] = false; // default: none\n  whiteList['rest'] = false; // default: depending on individual properties\n  whiteList['rest-after'] = false; // default: none\n  whiteList['rest-before'] = false; // default: none\n  whiteList['richness'] = false; // default: 50\n  whiteList['right'] = false; // default: auto\n  whiteList['rotation'] = false; // default: 0\n  whiteList['rotation-point'] = false; // default: 50% 50%\n  whiteList['ruby-align'] = false; // default: auto\n  whiteList['ruby-merge'] = false; // default: separate\n  whiteList['ruby-position'] = false; // default: before\n  whiteList['shape-image-threshold'] = false; // default: 0.0\n  whiteList['shape-outside'] = false; // default: none\n  whiteList['shape-margin'] = false; // default: 0\n  whiteList['size'] = false; // default: auto\n  whiteList['speak'] = false; // default: auto\n  whiteList['speak-as'] = false; // default: normal\n  whiteList['speak-header'] = false; // default: once\n  whiteList['speak-numeral'] = false; // default: continuous\n  whiteList['speak-punctuation'] = false; // default: none\n  whiteList['speech-rate'] = false; // default: medium\n  whiteList['stress'] = false; // default: 50\n  whiteList['string-set'] = false; // default: none\n  whiteList['tab-size'] = false; // default: 8\n  whiteList['table-layout'] = false; // default: auto\n  whiteList['text-align'] = true; // default: start\n  whiteList['text-align-last'] = true; // default: auto\n  whiteList['text-combine-upright'] = true; // default: none\n  whiteList['text-decoration'] = true; // default: none\n  whiteList['text-decoration-color'] = true; // default: currentColor\n  whiteList['text-decoration-line'] = true; // default: none\n  whiteList['text-decoration-skip'] = true; // default: objects\n  whiteList['text-decoration-style'] = true; // default: solid\n  whiteList['text-emphasis'] = true; // default: depending on individual properties\n  whiteList['text-emphasis-color'] = true; // default: currentColor\n  whiteList['text-emphasis-position'] = true; // default: over right\n  whiteList['text-emphasis-style'] = true; // default: none\n  whiteList['text-height'] = true; // default: auto\n  whiteList['text-indent'] = true; // default: 0\n  whiteList['text-justify'] = true; // default: auto\n  whiteList['text-orientation'] = true; // default: mixed\n  whiteList['text-overflow'] = true; // default: clip\n  whiteList['text-shadow'] = true; // default: none\n  whiteList['text-space-collapse'] = true; // default: collapse\n  whiteList['text-transform'] = true; // default: none\n  whiteList['text-underline-position'] = true; // default: auto\n  whiteList['text-wrap'] = true; // default: normal\n  whiteList['top'] = false; // default: auto\n  whiteList['transform'] = false; // default: none\n  whiteList['transform-origin'] = false; // default: 50% 50% 0\n  whiteList['transform-style'] = false; // default: flat\n  whiteList['transition'] = false; // default: depending on individual properties\n  whiteList['transition-delay'] = false; // default: 0s\n  whiteList['transition-duration'] = false; // default: 0s\n  whiteList['transition-property'] = false; // default: all\n  whiteList['transition-timing-function'] = false; // default: ease\n  whiteList['unicode-bidi'] = false; // default: normal\n  whiteList['vertical-align'] = false; // default: baseline\n  whiteList['visibility'] = false; // default: visible\n  whiteList['voice-balance'] = false; // default: center\n  whiteList['voice-duration'] = false; // default: auto\n  whiteList['voice-family'] = false; // default: implementation dependent\n  whiteList['voice-pitch'] = false; // default: medium\n  whiteList['voice-range'] = false; // default: medium\n  whiteList['voice-rate'] = false; // default: normal\n  whiteList['voice-stress'] = false; // default: normal\n  whiteList['voice-volume'] = false; // default: medium\n  whiteList['volume'] = false; // default: medium\n  whiteList['white-space'] = false; // default: normal\n  whiteList['widows'] = false; // default: 2\n  whiteList['width'] = true; // default: auto\n  whiteList['will-change'] = false; // default: auto\n  whiteList['word-break'] = true; // default: normal\n  whiteList['word-spacing'] = true; // default: normal\n  whiteList['word-wrap'] = true; // default: normal\n  whiteList['wrap-flow'] = false; // default: auto\n  whiteList['wrap-through'] = false; // default: wrap\n  whiteList['writing-mode'] = false; // default: horizontal-tb\n  whiteList['z-index'] = false; // default: auto\n\n  return whiteList;\n}\n\n\n/**\n * \n *\n * @param {String} name\n * @param {String} value\n * @param {Object} options\n * @return {String}\n */\nfunction onAttr (name, value, options) {\n  // do nothing\n}\n\n/**\n * \n *\n * @param {String} name\n * @param {String} value\n * @param {Object} options\n * @return {String}\n */\nfunction onIgnoreAttr (name, value, options) {\n  // do nothing\n}\n\nvar REGEXP_URL_JAVASCRIPT = /javascript\\s*\\:/img;\n\n/**\n * \n *\n * @param {String} name\n * @param {String} value\n * @return {String}\n */\nfunction safeAttrValue(name, value) {\n  if (REGEXP_URL_JAVASCRIPT.test(value)) return '';\n  return value;\n}\n\n\nexports.whiteList = getDefaultWhiteList();\nexports.getDefaultWhiteList = getDefaultWhiteList;\nexports.onAttr = onAttr;\nexports.onIgnoreAttr = onIgnoreAttr;\nexports.safeAttrValue = safeAttrValue;\n","module.exports = {\n  indexOf: function (arr, item) {\n    var i, j;\n    if (Array.prototype.indexOf) {\n      return arr.indexOf(item);\n    }\n    for (i = 0, j = arr.length; i < j; i++) {\n      if (arr[i] === item) {\n        return i;\n      }\n    }\n    return -1;\n  },\n  forEach: function (arr, fn, scope) {\n    var i, j;\n    if (Array.prototype.forEach) {\n      return arr.forEach(fn, scope);\n    }\n    for (i = 0, j = arr.length; i < j; i++) {\n      fn.call(scope, arr[i], i, arr);\n    }\n  },\n  trim: function (str) {\n    if (String.prototype.trim) {\n      return str.trim();\n    }\n    return str.replace(/(^\\s*)|(\\s*$)/g, '');\n  },\n  trimRight: function (str) {\n    if (String.prototype.trimRight) {\n      return str.trimRight();\n    }\n    return str.replace(/(\\s*$)/g, '');\n  }\n};\n","/**\n * Simple HTML Parser\n *\n * @author Zongmin Lei<leizongmin@gmail.com>\n */\n\nvar _ = require(\"./util\");\n\n/**\n * get tag name\n *\n * @param {String} html e.g. '<a hef=\"#\">'\n * @return {String}\n */\nfunction getTagName(html) {\n  var i = _.spaceIndex(html);\n  if (i === -1) {\n    var tagName = html.slice(1, -1);\n  } else {\n    var tagName = html.slice(1, i + 1);\n  }\n  tagName = _.trim(tagName).toLowerCase();\n  if (tagName.slice(0, 1) === \"/\") tagName = tagName.slice(1);\n  if (tagName.slice(-1) === \"/\") tagName = tagName.slice(0, -1);\n  return tagName;\n}\n\n/**\n * is close tag?\n *\n * @param {String} html '<a hef=\"#\">'\n * @return {Boolean}\n */\nfunction isClosing(html) {\n  return html.slice(0, 2) === \"</\";\n}\n\n/**\n * parse input html and returns processed html\n *\n * @param {String} html\n * @param {Function} onTag e.g. function (sourcePosition, position, tag, html, isClosing)\n * @param {Function} escapeHtml\n * @return {String}\n */\nfunction parseTag(html, onTag, escapeHtml) {\n  \"user strict\";\n\n  var rethtml = \"\";\n  var lastPos = 0;\n  var tagStart = false;\n  var quoteStart = false;\n  var currentPos = 0;\n  var len = html.length;\n  var currentTagName = \"\";\n  var currentHtml = \"\";\n\n  for (currentPos = 0; currentPos < len; currentPos++) {\n    var c = html.charAt(currentPos);\n    if (tagStart === false) {\n      if (c === \"<\") {\n        tagStart = currentPos;\n        continue;\n      }\n    } else {\n      if (quoteStart === false) {\n        if (c === \"<\") {\n          rethtml += escapeHtml(html.slice(lastPos, currentPos));\n          tagStart = currentPos;\n          lastPos = currentPos;\n          continue;\n        }\n        if (c === \">\") {\n          rethtml += escapeHtml(html.slice(lastPos, tagStart));\n          currentHtml = html.slice(tagStart, currentPos + 1);\n          currentTagName = getTagName(currentHtml);\n          rethtml += onTag(\n            tagStart,\n            rethtml.length,\n            currentTagName,\n            currentHtml,\n            isClosing(currentHtml)\n          );\n          lastPos = currentPos + 1;\n          tagStart = false;\n          continue;\n        }\n        if ((c === '\"' || c === \"'\") && html.charAt(currentPos - 1) === \"=\") {\n          quoteStart = c;\n          continue;\n        }\n      } else {\n        if (c === quoteStart) {\n          quoteStart = false;\n          continue;\n        }\n      }\n    }\n  }\n  if (lastPos < html.length) {\n    rethtml += escapeHtml(html.substr(lastPos));\n  }\n\n  return rethtml;\n}\n\nvar REGEXP_ILLEGAL_ATTR_NAME = /[^a-zA-Z0-9_:\\.\\-]/gim;\n\n/**\n * parse input attributes and returns processed attributes\n *\n * @param {String} html e.g. `href=\"#\" target=\"_blank\"`\n * @param {Function} onAttr e.g. `function (name, value)`\n * @return {String}\n */\nfunction parseAttr(html, onAttr) {\n  \"user strict\";\n\n  var lastPos = 0;\n  var retAttrs = [];\n  var tmpName = false;\n  var len = html.length;\n\n  function addAttr(name, value) {\n    name = _.trim(name);\n    name = name.replace(REGEXP_ILLEGAL_ATTR_NAME, \"\").toLowerCase();\n    if (name.length < 1) return;\n    var ret = onAttr(name, value || \"\");\n    if (ret) retAttrs.push(ret);\n  }\n\n  // \n  for (var i = 0; i < len; i++) {\n    var c = html.charAt(i);\n    var v, j;\n    if (tmpName === false && c === \"=\") {\n      tmpName = html.slice(lastPos, i);\n      lastPos = i + 1;\n      continue;\n    }\n    if (tmpName !== false) {\n      if (\n        i === lastPos &&\n        (c === '\"' || c === \"'\") &&\n        html.charAt(i - 1) === \"=\"\n      ) {\n        j = html.indexOf(c, i + 1);\n        if (j === -1) {\n          break;\n        } else {\n          v = _.trim(html.slice(lastPos + 1, j));\n          addAttr(tmpName, v);\n          tmpName = false;\n          i = j;\n          lastPos = i + 1;\n          continue;\n        }\n      }\n    }\n    if (/\\s|\\n|\\t/.test(c)) {\n      html = html.replace(/\\s|\\n|\\t/g, \" \");\n      if (tmpName === false) {\n        j = findNextEqual(html, i);\n        if (j === -1) {\n          v = _.trim(html.slice(lastPos, i));\n          addAttr(v);\n          tmpName = false;\n          lastPos = i + 1;\n          continue;\n        } else {\n          i = j - 1;\n          continue;\n        }\n      } else {\n        j = findBeforeEqual(html, i - 1);\n        if (j === -1) {\n          v = _.trim(html.slice(lastPos, i));\n          v = stripQuoteWrap(v);\n          addAttr(tmpName, v);\n          tmpName = false;\n          lastPos = i + 1;\n          continue;\n        } else {\n          continue;\n        }\n      }\n    }\n  }\n\n  if (lastPos < html.length) {\n    if (tmpName === false) {\n      addAttr(html.slice(lastPos));\n    } else {\n      addAttr(tmpName, stripQuoteWrap(_.trim(html.slice(lastPos))));\n    }\n  }\n\n  return _.trim(retAttrs.join(\" \"));\n}\n\nfunction findNextEqual(str, i) {\n  for (; i < str.length; i++) {\n    var c = str[i];\n    if (c === \" \") continue;\n    if (c === \"=\") return i;\n    return -1;\n  }\n}\n\nfunction findBeforeEqual(str, i) {\n  for (; i > 0; i--) {\n    var c = str[i];\n    if (c === \" \") continue;\n    if (c === \"=\") return i;\n    return -1;\n  }\n}\n\nfunction isQuoteWrapString(text) {\n  if (\n    (text[0] === '\"' && text[text.length - 1] === '\"') ||\n    (text[0] === \"'\" && text[text.length - 1] === \"'\")\n  ) {\n    return true;\n  } else {\n    return false;\n  }\n}\n\nfunction stripQuoteWrap(text) {\n  if (isQuoteWrapString(text)) {\n    return text.substr(1, text.length - 2);\n  } else {\n    return text;\n  }\n}\n\nexports.parseTag = parseTag;\nexports.parseAttr = parseAttr;\n","import MiniValineFactory from './MiniValine'\nimport('./style/index.scss')\n\nconst MiniValine = (option) => {\n  return new MiniValineFactory(option)\n}\n\nmodule.exports = MiniValine\nmodule.exports.default = MiniValine\n","import body from './body'\r\nimport util from './utils'\r\nimport { GravatarBaseUrl } from './Default'\r\n\r\nconst MiniValineFactory = function (option) {\r\n  const root = this\r\n  root.config = option\r\n  util.Config(root)\r\n  util.i18n(root)\r\n  util.script(root)\r\n  util.smile(root)\r\n  util.GetIP(root)\r\n  root.initCheck()\r\n}\r\nMiniValineFactory.prototype.initCheck = function () {\r\n  const root = this\r\n  var check = setInterval(function () {\r\n    if (typeof root.i18n == 'undefined') { return }\r\n    if (typeof md5 == 'undefined') { return }\r\n    if (typeof AV == 'undefined') { return }\r\n    clearInterval(check)\r\n    root.initBody()\r\n  }, 5)\r\n}\r\nMiniValineFactory.prototype.initBody = function () {\r\n  const root = this\r\n  try {\r\n    body.el(root)\r\n    // loading\r\n    body.loading(root)\r\n\r\n    root.nodata.show()\r\n\r\n    // load smiles image\r\n    var checksmiles = setInterval(function () {\r\n      if (typeof root.emoticonList == 'undefined') { return }\r\n      clearInterval(checksmiles)\r\n      body.smiles(root)\r\n    }, 10)\r\n\r\n    util.setAV(root)\r\n  } catch (ex) {\r\n    console.log(ex)\r\n    return\r\n  }\r\n\r\n  root.loading.hide()\r\n\r\n  const mark = root.el.querySelector('.vmark')\r\n  // alert\r\n  root.alert = {\r\n    /**\r\n       * {\r\n       *  type:0/1,\r\n       *  text:'',\r\n       *  ctxt:'',\r\n       *  otxt:'',\r\n       *  cb:fn\r\n       * }\r\n       *\r\n       * @param {Object} o\r\n       */\r\n    show (o) {\r\n      mark.innerHTML = `<div class=\"valert txt-center\"><div class=\"vtext\">${o.text}</div><div class=\"vbtns\"></div></div>`\r\n      const vbtns = mark.querySelector('.vbtns')\r\n      const cBtn = `<button class=\"vcancel vbtn\">${(o.ctxt) || root.i18n.cancel}</button>`\r\n      const oBtn = `<button class=\"vsure vbtn\">${(o.otxt) || root.i18n.continue}</button>`\r\n      vbtns.innerHTML = `${cBtn}${o.type && oBtn}`\r\n      mark.querySelector('.vcancel').addEventListener('click', (e) => {\r\n        root.alert.hide()\r\n      })\r\n      mark.setAttribute('style', 'display:block;')\r\n      if (o.type) {\r\n        const ok = mark.querySelector('.vsure')\r\n        util.dom.on('click', ok, (e) => {\r\n          root.alert.hide()\r\n          o.cb && o.cb()\r\n        })\r\n      }\r\n    },\r\n    hide () {\r\n      mark.setAttribute('style', 'display:none;')\r\n    }\r\n  }\r\n\r\n  root.loading.show()\r\n  const query1 = new root.v.Query('Comment')\r\n  query1.equalTo('url', root.Comment.url)\r\n  const query2 = new root.v.Query('Comment')\r\n  query2.equalTo('url', `${root.Comment.url}/`)\r\n  const query = AV.Query.or(query1, query2)\r\n  query.notEqualTo('isSpam', true)\r\n  query\r\n    .count()\r\n    .then((count) => {\r\n      root.el.querySelector('.count').innerHTML = count\r\n    })\r\n    .catch((ex) => {\r\n      console.log(ex)\r\n      root.el.querySelector('.count').innerHTML = 0\r\n    })\r\n  root.bind()\r\n}\r\n\r\nMiniValineFactory.prototype.bind = function () {\r\n  const root = this\r\n  // Smile pictures\r\n  const vsmiles = root.el.querySelector('.vsmile-icons')\r\n  util.dom.on('click', vsmiles, (e) => {\r\n    const textField = root.el.querySelector('.veditor')\r\n    const imgSrc = e.target.src\r\n    if (typeof imgSrc === 'undefined') return\r\n    const tag = `!(:${decodeURI(imgSrc).replace(/^.*\\/(.*)$/, '$1')}:)`\r\n    if (document.selection) {\r\n      textField.focus()\r\n      var sel = document.selection.createRange()\r\n      sel.text = tag\r\n      textField.focus()\r\n    // } else if (textField.selectionStart || textField.selectionStart === '0') {\r\n    } else if (textField.selectionStart) {\r\n      const startPos = textField.selectionStart\r\n      const endPos = textField.selectionEnd\r\n      let cursorPos = endPos\r\n      textField.value =\r\n          textField.value.substring(0, startPos) +\r\n          tag +\r\n          textField.value.substring(endPos, textField.value.length)\r\n      cursorPos += tag.length\r\n      textField.focus()\r\n      textField.selectionStart = cursorPos\r\n      textField.selectionEnd = cursorPos\r\n    } else {\r\n      textField.value += tag\r\n      textField.focus()\r\n    }\r\n    root.Comment.comment = textField.value\r\n    const submitBtn = root.el.querySelector('.vsubmit')\r\n    if (submitBtn.getAttribute('disabled')) {\r\n      submitBtn.removeAttribute('disabled')\r\n    }\r\n  })\r\n  const commentTrigger = root.el.querySelector('.commentTrigger')\r\n  util.dom.on('click', commentTrigger, (e) => {\r\n    commentTrigger.setAttribute('style', 'display:none')\r\n    root.el.querySelector('.auth-section').removeAttribute('style')\r\n    root.el.querySelector('.veditor').focus()\r\n  })\r\n\r\n  // cancel reply\r\n  util.dom.on('click', root.el.querySelector('.vcancel-comment-reply'), (e) => {\r\n    root.reset()\r\n  })\r\n\r\n  // Query && show comment list\r\n\r\n  const expandEvt = (el) => {\r\n    if (el.offsetHeight > 180) {\r\n      el.classList.add('expand')\r\n      util.dom.on('click', el, (e) => {\r\n        el.setAttribute('class', 'vcomment')\r\n      })\r\n    }\r\n  }\r\n\r\n  /*\r\n     * : Leancloud\r\n     * */\r\n\r\n  let num = 1\r\n  let parentCount = 0\r\n\r\n  const parentQuery = (pageNum = 1) => {\r\n    root.loading.show()\r\n    const cq = root.v.Query\r\n      .doCloudQuery(`select nick, comment, link, rid, emailHash, isSpam from Comment where (rid='' or rid is not exists) and (url='${root.Comment.url}' or url='${`${root.Comment.url}/`}') order by -createdAt limit ${(pageNum - 1) * root.pageSize},${root.pageSize}`)\r\n    cq.then((rets) => {\r\n      rets = (rets && rets.results) || []\r\n      const len = rets.length\r\n      if (len) {\r\n        // root.el.querySelector('.vlist').innerHTML = '';\r\n        for (let i = 0; i < len; i++) {\r\n          if (rets[i].get('isSpam')) continue\r\n          const parentVcard = insertComment(\r\n            rets[i],\r\n            root.el.querySelector('.vlist'),\r\n            false\r\n          )\r\n          parentVcard.setAttribute('style', 'margin-bottom: .5em')\r\n          nestQuery(parentVcard)\r\n        }\r\n        const vpage = root.el.querySelector('.vpage')\r\n        vpage.innerHTML =\r\n            root.pageSize * pageNum < parentCount\r\n              ? `<div id=\"vmore\" class=\"more\">${root.i18n.more}</div>`\r\n              : ''\r\n        const vmore = vpage.querySelector('#vmore')\r\n        if (vmore) {\r\n          util.dom.on('click', vmore, (e) => {\r\n            vpage.innerHTML = ''\r\n            parentQuery(++num)\r\n          })\r\n        }\r\n      }\r\n      root.loading.hide()\r\n      util.MathJaxSupport(root)\r\n    }).catch((ex) => {\r\n      console.log(ex)\r\n      root.loading.hide()\r\n    })\r\n  }\r\n  root.v.Query.doCloudQuery(\r\n      `select count(*) from Comment where (rid='' or rid is not exists) and (url='${root.Comment.url}' or url='${`${root.Comment.url}/`}') order by -createdAt`\r\n  ).then((data) => {\r\n    parentCount = data.count\r\n    parentQuery(1)\r\n  }).catch((ex) => {\r\n    console.log(ex)\r\n  })\r\n\r\n  // \r\n  const nestQuery = (vcard, level = 1) => {\r\n    const vchild = vcard.querySelector('.vcomment-children')\r\n    const _vlist = vchild.querySelector('.vlist')\r\n    const _id = vcard.getAttribute('id')\r\n    if (level <= 0) {\r\n      vchild.setAttribute('style', 'margin-left: 0 !important')\r\n    }\r\n    if (level >= root.maxNestLevel) {\r\n      root.v.Query.doCloudQuery(\r\n          `select count(*) from Comment where rid='${_id}' and (url='${root.Comment.url}' or url='${`${root.Comment.url}/`}') order by -createdAt`\r\n      ).then(\r\n        (data) => {\r\n          const { count } = data\r\n          if (count > 0) {\r\n            const showChildrenWrapper = vchild.querySelector(\r\n              '.vshow-children-wrapper'\r\n            )\r\n            showChildrenWrapper.setAttribute(\r\n              'style',\r\n              'display: block !important;'\r\n            )\r\n            showChildrenWrapper.innerHTML = `<span class=\"vshow-children\" rid=\"${_id}\">${root.i18n.more}</span>`\r\n            const showChildren = showChildrenWrapper.querySelector(\r\n              '.vshow-children'\r\n            )\r\n            util.dom.on('click', showChildren, (e) => {\r\n              showChildrenWrapper.setAttribute(\r\n                'style',\r\n                'display: none !important;'\r\n              )\r\n              nestQuery(vcard, -1000)\r\n            })\r\n          }\r\n        },\r\n        (error) => {\r\n          console.log(error)\r\n        }\r\n      )\r\n      return\r\n    }\r\n\r\n    root.v.Query.doCloudQuery(`select nick, comment, link, rid, emailHash, isSpam from Comment where rid='${_id}' and (url='${root.Comment.url}' or url='${`${root.Comment.url}/`}') order by -createdAt`)\r\n      .then((rets) => {\r\n        rets = (rets && rets.results) || []\r\n        const len = rets.length\r\n        if (len) {\r\n          for (let i = 0; i < len; i++) {\r\n            if (!rets[i].get('isSpam')) {\r\n              const vl = insertComment(rets[i], _vlist, true)\r\n              nestQuery(vl, level + 1)\r\n            }\r\n          }\r\n        }\r\n      })\r\n      .catch((ex) => {\r\n        console.log(ex)\r\n        root.loading.hide()\r\n      })\r\n  }\r\n\r\n  const insertComment = (comment, vlist = null, top = true) => {\r\n    const _vcard = document.createElement('li')\r\n    _vcard.setAttribute('class', 'vcard')\r\n    _vcard.setAttribute('id', comment.id)\r\n    _vcard.innerHTML = body.vcard(root, comment)\r\n\r\n    const _vlist = vlist || root.el.querySelector('.vlist')\r\n    const _vlis = _vlist.querySelectorAll('li')\r\n    // let _vat = _vcard.querySelector('.vat');\r\n    const _as = _vcard.querySelectorAll('a')\r\n    for (let i = 0, len = _as.length; i < len; i++) {\r\n      const item = _as[i]\r\n      if (item && item.getAttribute('class') !== 'at') {\r\n        item.setAttribute('target', '_blank')\r\n        item.setAttribute('rel', 'nofollow')\r\n      }\r\n    }\r\n    if (!top) _vlist.appendChild(_vcard)\r\n    else _vlist.insertBefore(_vcard, _vlis[0])\r\n    const _vcontent = _vcard.querySelector('.vcomment')\r\n    expandEvt(_vcontent)\r\n    bindAtEvt(_vcard)\r\n    return _vcard\r\n  }\r\n\r\n  const mapping = {\r\n    veditor: 'comment',\r\n    vnick: 'nick',\r\n    vlink: 'link',\r\n    vmail: 'mail'\r\n  }\r\n  const inputs = {}\r\n  for (const i in mapping) {\r\n    if (mapping.hasOwnProperty(i)) {\r\n      const _v = mapping[i]\r\n      const _el = root.el.querySelector(`.${i}`)\r\n      inputs[_v] = _el\r\n      util.dom.on('input', _el, (e) => {\r\n        // root.Comment[_v] = HtmlUtil.encode(_el.value.replace(/(^\\s*)|(\\s*$)/g, \"\"));\r\n        root.Comment[_v] = _el.value\r\n      })\r\n    }\r\n  }\r\n\r\n  // cache\r\n  const getCache = () => {\r\n    let s = localStorage && localStorage.getItem('MiniValineCache')\r\n    if (s) {\r\n      s = JSON.parse(s)\r\n      const m = ['nick', 'link', 'mail']\r\n      for (let i = 0; i < m.length; i++) {\r\n        const k = m[i]\r\n        root.el.querySelector(`.v${k}`).value = s[k]\r\n        root.Comment[k] = s[k]\r\n      }\r\n      if (s.mail !== '') {\r\n        const el = root.el.querySelector('.visitor_avatar')\r\n        el.setAttribute(\r\n          'src',\r\n            `${GravatarBaseUrl + md5(s.mail.toLowerCase().trim())}?size=80&d=https%3a%2f%2fgravatar.loli.net%2favatar%2f9e63c80900d106cbbec5a9f4ea433a3e.jpg%3fsize%3d80`\r\n        )\r\n      }\r\n    }\r\n  }\r\n  getCache()\r\n\r\n  // reset form\r\n  root.reset = () => {\r\n    for (const i in mapping) {\r\n      if (mapping.hasOwnProperty(i)) {\r\n        const _v = mapping[i]\r\n        const _el = root.el.querySelector(`.${i}`)\r\n        _el.value = ''\r\n        root.Comment[_v] = ''\r\n      }\r\n    }\r\n    root.Comment.rid = ''\r\n    root.Comment.nick = ''\r\n    getCache()\r\n    if (smileicons.getAttribute('triggered')) {\r\n      smileicons.setAttribute('style', 'display:none;')\r\n      smileicons.removeAttribute('triggered')\r\n    }\r\n    if (previewText.getAttribute('triggered')) {\r\n      previewText.setAttribute('style', 'display:none;')\r\n      previewText.removeAttribute('triggered')\r\n    }\r\n    root.el\r\n      .querySelector('.vcancel-comment-reply')\r\n      .setAttribute('style', 'display:none')\r\n    root.el\r\n      .querySelector('#vinputs-placeholder')\r\n      .appendChild(root.el.querySelector('.vinputs-wrap'))\r\n  }\r\n\r\n  // submit\r\n  const submitBtn = root.el.querySelector('.vsubmit')\r\n  const submitEvt = (e) => {\r\n    if (submitBtn.getAttribute('disabled')) {\r\n      root.alert.show({\r\n        type: 0,\r\n        text: '()\"',\r\n        ctxt: ''\r\n      })\r\n      return\r\n    }\r\n    if (root.Comment.comment === '') {\r\n      inputs.comment.focus()\r\n      return\r\n    }\r\n    if (root.Comment.nick === '') {\r\n      inputs.nick.focus()\r\n      return\r\n    }\r\n    // render markdown\r\n\r\n    const render = () => {\r\n      const idx = root.Comment.comment.indexOf(root.Comment.at)\r\n      if (idx > -1 && root.Comment.at !== '') {\r\n        const at = `<a class=\"at\" href='#${root.Comment.rid}'>${root.Comment.at}</a>`\r\n        root.Comment.comment = root.Comment.comment.replace(\r\n          root.Comment.at,\r\n          at\r\n        )\r\n      }\r\n      // veirfy\r\n      const mailRet = util.check.mail(root.Comment.mail)\r\n      const linkRet = util.check.link(root.Comment.link)\r\n      root.Comment.mail = mailRet.k ? mailRet.v : ''\r\n      root.Comment.link = linkRet.k ? linkRet.v : ''\r\n\r\n      if (!mailRet.k || !linkRet.k) {\r\n        root.alert.show({\r\n          type: 0,\r\n          text: root.i18n.inputTips,\r\n          ctxt: root.i18n.confirm\r\n        })\r\n      } else {\r\n        commitEvt()\r\n      }\r\n    }\r\n    if (root.md || typeof root.config.md == 'undefined') {\r\n      import('./utils/md.js').then(({ markdown }) => {\r\n        root.Comment.comment = markdown(util.MakeComment(root))\r\n        render()\r\n      })\r\n    } else {\r\n      root.Comment.comment = util.MakeComment(root)\r\n      render()\r\n    }\r\n  }\r\n\r\n  const smileBtn = root.el.querySelector('.vemoji-btn')\r\n  const smileicons = root.el.querySelector('.vsmile-icons')\r\n  util.dom.on('click', smileBtn, (e) => {\r\n    if (previewText.getAttribute('triggered')) {\r\n      previewText.setAttribute('style', 'display:none;')\r\n      previewText.removeAttribute('triggered')\r\n    }\r\n    if (smileicons.getAttribute('triggered')) {\r\n      smileicons.setAttribute('style', 'display:none;')\r\n      smileicons.removeAttribute('triggered')\r\n    } else {\r\n      smileicons.removeAttribute('style')\r\n      smileicons.setAttribute('triggered', 1)\r\n    }\r\n  })\r\n\r\n  const previewBtn = root.el.querySelector('.vpreview-btn')\r\n  const previewText = root.el.querySelector('.vpreview-text')\r\n  util.dom.on('click', previewBtn, (e) => {\r\n    if (smileicons.getAttribute('triggered')) {\r\n      smileicons.setAttribute('style', 'display:none;')\r\n      smileicons.removeAttribute('triggered')\r\n    }\r\n    if (previewText.getAttribute('triggered')) {\r\n      previewText.setAttribute('style', 'display:none;')\r\n      previewText.removeAttribute('triggered')\r\n    } else {\r\n      if (root.Comment.comment === '') {\r\n        inputs.comment.focus()\r\n        return\r\n      }\r\n      // render markdown\r\n      const render = () => {\r\n        previewText.removeAttribute('style')\r\n        previewText.setAttribute('triggered', 1)\r\n        util.MathJaxSupport(root)\r\n      }\r\n      if (root.md || typeof root.config.md == 'undefined') {\r\n        import('./utils/md.js').then(({ markdown }) => {\r\n          previewText.innerHTML = markdown(util.MakeComment(root))\r\n          render()\r\n        })\r\n      } else {\r\n        previewText.innerHTML = util.MakeComment(root)\r\n        render()\r\n      }\n    }\n  })\r\n\r\n  // setting access\r\n  const getAcl = () => {\r\n    const acl = new root.v.ACL()\r\n    acl.setPublicReadAccess(true)\r\n    acl.setPublicWriteAccess(false)\r\n    return acl\r\n  }\r\n\r\n  const commitEvt = () => {\r\n    submitBtn.setAttribute('disabled', true)\r\n    root.submitting.show()\r\n    // \r\n    const Ct = root.v.Object.extend('Comment')\r\n    // \r\n    const comment = new Ct()\r\n    for (const i in root.Comment) {\r\n      if (root.Comment.hasOwnProperty(i)) {\r\n        if (i === 'at') continue\r\n        const _v = root.Comment[i]\r\n        comment.set(i, _v)\r\n      }\r\n    }\r\n    comment.set(\r\n      'emailHash',\r\n      md5(root.Comment.mail.toLowerCase().trim())\r\n    )\r\n    comment.setACL(getAcl())\r\n    comment\r\n      .save()\r\n      .then((commentItem) => {\r\n        localStorage &&\r\n            localStorage.setItem(\r\n              'MiniValineCache',\r\n              JSON.stringify({\r\n                nick: root.Comment.nick,\r\n                link: root.Comment.link,\r\n                mail: root.Comment.mail\r\n              })\r\n            )\r\n        const _count = root.el.querySelector('.count')\r\n        _count.innerText = Number(_count.innerText) + 1\r\n        if (root.Comment.rid === '') {\r\n          insertComment(commentItem, null, true)\r\n        } else {\r\n          // get children vlist\r\n          const _vlist = root.el.querySelector(\r\n              `#children-list-${root.Comment.rid}`\r\n          )\r\n          insertComment(commentItem, _vlist, true)\r\n        }\r\n\r\n        submitBtn.removeAttribute('disabled')\r\n        root.submitting.hide()\r\n        root.nodata.hide()\r\n        root.reset()\r\n        util.MathJaxSupport(root)\r\n      })\r\n      .catch((ex) => {\r\n        root.submitting.hide()\r\n      })\r\n  }\r\n\r\n  // at event\r\n  const bindAtEvt = (vcard) => {\r\n    const _id = vcard.getAttribute('id')\r\n    const _vat = vcard.querySelector(`#at-${_id}`)\r\n    util.dom.on('click', _vat, (e) => {\r\n      const at = _vat.getAttribute('at')\r\n      const rid = _vat.getAttribute('rid')\r\n      root.Comment.rid = rid\r\n      root.Comment.at = at\r\n      inputs.comment.value = `${at} ${inputs.comment.value}`\r\n      // move inputs\r\n      const commentEl = vcard.querySelector(`#comment-${_id}`)\r\n      commentEl.appendChild(root.el.querySelector('.vinputs-wrap'))\r\n      root.el\r\n        .querySelector('.vcancel-comment-reply')\r\n        .removeAttribute('style')\r\n      // remove comment trigger\r\n      root.el\r\n        .querySelector('.commentTrigger')\r\n        .setAttribute('style', 'display:none')\r\n      root.el.querySelector('.auth-section').removeAttribute('style')\r\n      root.el.querySelector('.veditor').focus()\r\n      // focus\r\n      inputs.comment.focus()\r\n    })\r\n  }\r\n  util.dom.on('click', submitBtn, submitEvt)\r\n}\r\n\r\nmodule.exports = MiniValineFactory\n","import vcard from './vcard'\r\nimport loading from './loading'\r\nimport smiles from './smiles'\r\nimport el from './el'\r\n\r\nmodule.exports = {\r\n  vcard: vcard,\r\n  loading: loading,\r\n  smiles: smiles,\r\n  el: el\r\n}\n","import { GravatarBaseUrl } from '../Default'\r\nimport timeAgo from '../utils/timeago'\r\nconst vcard = function (root, comment) {\r\n  const emailHash = comment.get('emailHash')\r\n  const gravatarUrl = `${GravatarBaseUrl + emailHash}?size=80&d=https%3a%2f%2fgravatar.loli.net%2favatar%2f9e63c80900d106cbbec5a9f4ea433a3e.jpg%3fsize%3d80`\r\n  const HTML = '<div class=\"vcomment-body\">' +\r\n                                    '<div class=\"vhead\" >' +\r\n                                        `<img class=\"vavatar lazyload\" data-src=\"${gravatarUrl}\"/>` +\r\n                                        `<a rid='${comment.id}' at='@${comment.get('nick')}' class=\"vat\" id=\"at-${comment.id}\">${root.i18n.reply}</a>` +\r\n                                        `<div class=\"vmeta-info\">${comment.get('link') ? `<a class=\"vname\" href=\"${comment.get('link')}\" target=\"_blank\" rel=\"nofollow\" > ${comment.get('nick')}</a>` : `<span class=\"vname\">${comment.get('nick')}</span>`}${emailHash === root.adminEmailMd5.toLowerCase().trim() ? '<span class=\"spacer\"></span><span class=\"vtime\"><svg xmlns:xlink=\"http://www.w3.org/1999/xlink\" p-id=\"1615\" xmlns=\"http://www.w3.org/2000/svg\" version=\"1.1\" viewBox=\"0 0 1024 1024\" style=\"height: .8em;width: .8em;fill: #777;\" class=\"icon\" t=\"1559101574545\"><defs><style type=\"text/css\"></style></defs><path d=\"M582.044306 993.554603l17.113098-99.494753-72.233191-70.442285c-25.072678-24.27672-34.027206-57.109988-24.07773-87.555383 9.949475-30.445394 36.41508-51.538282 70.840264-56.51302l87.356393-12.735328c-3.780801-2.586864-7.163622-5.173727-10.347454-7.95958-10.944423-9.551496-18.705014-19.699961-23.480762-30.047415s-7.561601-21.092888-8.15857-31.440342c-0.596969-10.546444 0-20.893898 1.989895-31.042363 1.392927-8.15857 3.581811-15.123202 6.168675-20.893898 2.586864-5.770696 5.969685-10.546444 10.148465-14.725223 4.17878-3.97979 8.755538-7.95958 14.327244-11.541391 5.571706-3.780801 11.143412-8.15857 17.312087-13.730276 5.372717-4.775748 10.148465-11.342402 14.725223-19.898951 4.17878-8.357559 8.15857-17.113098 11.541391-25.868636 3.382822-9.949475 6.566654-20.694909 9.153517-31.440342 6.765643-1.989895 13.133307-5.571706 19.301982-11.143412 5.372717-4.775748 10.148465-11.342402 14.725223-19.898951 4.17878-8.556549 7.561601-19.699961 9.551496-34.027206 1.392927-10.944423 1.193937-19.898951-0.397979-27.460552-1.591916-7.561601-3.97979-13.531286-6.566654-18.307035-2.586864-5.571706-6.367664-9.750486-11.143412-12.337349 0.596969-27.062573-0.994948-54.324135-5.173727-81.386708-3.183832-23.082783-9.153517-47.558492-17.710066-73.626117s-21.291877-49.946366-38.205985-71.636222c-7.561601-9.551496-17.312087-18.904003-29.649436-28.05752-11.93937-9.153517-26.067625-17.312087-41.588807-24.873688-15.720171-7.561601-32.43529-13.531286-50.344345-18.307035s-37.012048-7.163622-56.51302-7.163622c-15.720171 0-31.838321 1.591916-48.35445 4.17878-16.715119 2.984843-33.032258 7.561601-49.349398 14.327244-16.31714 6.765643-32.43529 16.11815-48.35445 28.05752s-30.246405 27.062573-43.180723 45.369607c-13.531286 19.500972-23.878741 41.588807-31.042363 66.064516-7.163622 24.475709-12.13836 47.558492-14.725223 69.248348-3.581811 25.868636-4.775748 51.737272-4.17878 77.406918-5.571706 6.964633-9.750486 13.929265-12.337349 21.490867-2.785853 6.765643-4.576759 14.725223-5.571706 23.878741-1.193937 9.153517 0 19.699961 3.382822 31.042363 3.581811 11.541391 7.561601 20.29693 12.337349 26.465604 4.775748 6.168675 9.153517 10.944423 13.332297 14.327244 4.775748 3.581811 9.551496 5.770696 14.327244 7.163622 3.382822 10.745433 6.765643 21.291877 10.148465 31.440342 3.382822 8.755538 6.964633 17.312087 11.143412 25.868636 4.17878 8.556549 8.755538 15.123202 14.327244 19.898951 11.740381 9.551496 21.888846 18.705014 31.042363 27.460552 9.153517 8.755538 14.327244 21.291877 15.720171 37.609017 0.596969 10.347454 0.994948 19.898951 0.994948 28.654489 0 8.954528-1.591916 17.312087-4.576759 25.470657-2.984843 8.15857-8.556549 16.31714-16.31714 24.475709-7.760591 8.15857-18.705014 16.715119-33.032258 25.470657-17.511077 11.541391-38.006996 20.29693-61.487757 26.465604-23.480762 6.168675-125.761368 41.389817-147.849203 48.951419-21.888846 7.362612-41.190828 17.511077-57.507967 30.445394-16.11815 12.735328-26.266615 31.838321-30.445394 56.910999C2.387875 881.52351 0.994949 888.488143 4.57676 916.346674c3.581811 27.659541 9.153517 44.17567 16.715119 49.747377 6.168675 4.576759 23.679751 10.148465 52.931209 16.715119 29.251457 6.566654 213.11776 41.190828 426.633501 41.190828 27.858531 0 54.722114-0.596969 80.59075-1.790906C580.253401 1012.856585 580.45239 1003.305088 582.044306 993.554603z\" p-id=\"1616\"></path><path d=\"M1004.300038 748.399532l-106.459386-15.521182c-16.31714-2.387874-35.619122-16.31714-42.981733-31.241353l-47.558492-96.509911c-3.581811-7.362612-8.556549-11.143412-13.332297-11.143412-4.775748 0-9.551496 3.780801-13.332297 11.143412l-47.558492 96.509911c-7.362612 14.725223-26.664594 28.853478-42.981733 31.241353l-106.459386 15.521182c-16.31714 2.387874-20.09794 13.730276-8.15857 25.271667l77.008939 75.019044c11.740381 11.541391 19.102993 34.226195 16.31714 50.543335l-18.108045 106.061407c-1.989895 11.740381 2.586864 18.705014 10.745433 18.705014 3.183832 0 6.765643-0.994948 10.745433-3.183832l95.116984-50.145356c7.362612-3.780801 16.914108-5.770696 26.465604-5.770696 9.551496 0 19.301982 1.989895 26.465604 5.770696l95.116984 50.145356c3.97979 2.188885 7.760591 3.183832 10.745433 3.183832 8.15857 0 12.735328-6.964633 10.745433-18.705014l-18.108045-106.061407c-2.785853-16.31714 4.576759-39.001943 16.31714-50.543335l77.008939-75.019044C1024.198988 762.129808 1020.617177 750.787406 1004.300038 748.399532z\" p-id=\"1617\"></path></svg></span><span class=\"spacer\"></span>' : '<span class=\"spacer\"></span>'}` +\r\n\t\t\t\t\t\t\t\t\t\t`<span class=\"vtime\">${timeAgo(comment.get('createdAt'), root.i18n)}</span>` +\r\n                                        '</div>' +\r\n                                    '</div>' +\r\n                                    `<section class=\"text-wrapper\"  id=\"comment-${comment.id}\">` +\r\n                                        `<div class=\"vcomment\">${comment.get('comment')}</div>` +\r\n                                    '</section>' +\r\n                                '</div>' +\r\n                                '<div class=\"vcomment-children\">' +\r\n                                    '<div class=\"vshow-children-wrapper\" style=\"display: none\"></div>' +\r\n                                    `<ul class=\"vlist\" id=\"children-list-${comment.id}\"></ul>` +\r\n                                '</div>'\r\n  return HTML\r\n}\r\nmodule.exports = vcard\n","const timeAgo = (date, i18n) => {\r\n  try {\r\n    const oldTime = date.getTime()\r\n    const currTime = new Date().getTime()\r\n    const diffValue = currTime - oldTime\r\n\r\n    const days = Math.floor(diffValue / (24 * 3600 * 1000))\r\n    if (days === 0) {\r\n      // \r\n      const leave1 = diffValue % (24 * 3600 * 1000) // \r\n      const hours = Math.floor(leave1 / (3600 * 1000))\r\n      if (hours === 0) {\r\n        // \r\n        const leave2 = leave1 % (3600 * 1000) // \r\n        const minutes = Math.floor(leave2 / (60 * 1000))\r\n        if (minutes === 0) {\r\n          // \r\n          const leave3 = leave2 % (60 * 1000) // \r\n          const seconds = Math.round(leave3 / 1000)\r\n          if (seconds === 0) return i18n.now\r\n          return `${seconds} ${i18n.seconds}`\r\n        }\r\n        return `${minutes} ${i18n.minutes}`\r\n      }\r\n      return `${hours} ${i18n.hours}`\r\n    }\r\n    if (days < 0) return i18n.now\r\n    if (days < 365) {\r\n      return `${days} ${i18n.days}`\r\n    } else {\r\n      return dateFormat(date)\r\n    }\r\n  } catch (error) {\r\n    console.log(error)\r\n  }\r\n}\r\n\r\nconst dateFormat = (date) => {\r\n  const vDay = padWithZeros(date.getDate(), 2)\r\n  const vMonth = padWithZeros(date.getMonth() + 1, 2)\r\n  const vYear = padWithZeros(date.getFullYear(), 2)\r\n  // var vHour = padWithZeros(date.getHours(), 2);\r\n  // var vMinute = padWithZeros(date.getMinutes(), 2);\r\n  // var vSecond = padWithZeros(date.getSeconds(), 2);\r\n  return `${vYear}-${vMonth}-${vDay}`\r\n  // return `${vYear}-${vMonth}-${vDay} ${vHour}:${vMinute}:${vSecond}`;\r\n}\r\nconst padWithZeros = (vNumber, width) => {\r\n  let numAsString = vNumber.toString()\r\n  while (numAsString.length < width) {\r\n    numAsString = `0${numAsString}`\r\n  }\r\n  return numAsString\r\n}\r\nmodule.exports = timeAgo\n","const loading = function (root) {\r\n  // Empty Data\r\n  const vempty = root.el.querySelector('.vempty')\r\n  root.nodata = {\r\n    show (txt) {\r\n      vempty.innerHTML = txt || root.i18n.noCommentYet\r\n      vempty.setAttribute('style', 'display:block;')\r\n    },\r\n    hide () {\r\n      vempty.setAttribute('style', 'display:none;')\r\n    }\r\n  }\r\n  // loading\r\n  const spinner = '<div class=\"spinner\"><div class=\"r1\"></div><div class=\"r2\"></div><div class=\"r3\"></div><div class=\"r4\"></div><div class=\"r5\"></div></div>'\r\n  const vloading = root.el.querySelector('.vloading')\r\n  vloading.innerHTML = spinner\r\n  root.loading = {\r\n    show () {\r\n      vloading.setAttribute('style', 'display:block;')\r\n      root.nodata.hide()\r\n    },\r\n    hide () {\r\n      vloading.setAttribute('style', 'display:none;')\r\n      root.el.querySelectorAll('.vcard').length === 0 && root.nodata.show()\r\n    }\r\n  }\r\n  // submitting\r\n  const vsubmitting = root.el.querySelector('.vsubmitting')\r\n  vsubmitting.innerHTML = spinner\r\n  root.submitting = {\r\n    show () {\r\n      vsubmitting.setAttribute('style', 'display:block;')\r\n    },\r\n    hide () {\r\n      vsubmitting.setAttribute('style', 'display:none;')\r\n      root.nodata.hide()\r\n    }\r\n  }\r\n}\r\n\r\nmodule.exports = loading\n","const smiles = function (root) {\r\n  const smileWrapper = root.el.querySelector('.vsmile-icons')\r\n  const smileNames = root.emoticonList || []\r\n  for (const i in smileNames) {\r\n    if (smileNames.hasOwnProperty(i)) {\r\n      const img = document.createElement('img')\r\n      img.setAttribute(\r\n        'data-src',\r\n          `${root.emoticonUrl}/${smileNames[i]}`\r\n      )\r\n      img.setAttribute('class', 'lazyload')\r\n      smileWrapper.appendChild(img)\r\n    }\n  }\r\n}\r\nmodule.exports = smiles\n","import ele from './ele'\r\nconst el = function (root) {\r\n  const el =\r\n        toString.call(root.config.el) === '[object HTMLDivElement]'\r\n          ? root.config.el\r\n          : document.querySelectorAll(root.config.el)[0]\r\n  if (toString.call(el) !== '[object HTMLDivElement]') {\r\n    return\r\n  }\r\n  root.el = el\r\n  root.el.classList.add('MiniValine')\r\n  root.el.innerHTML = ele(root)\r\n}\r\nmodule.exports = el\n","import { GravatarBaseUrl, DefaultEmailHash } from '../Default'\r\nimport format from 'string-format'\r\nconst ele = function (root) {\r\n  const HTML = '<div id=\"vinputs-placeholder\">' +\r\n                      '<div class=\"vinputs-wrap\">' +\r\n                       `<p class=\"vcancel-comment-reply\" href=\"#\" rel=\"nofollow\" style=\"display:none\">${root.i18n.cancelReply}</p>` +\r\n                                '<div class=\"vinputs-area\">' +\r\n                                    '<div class=\"textarea-wrapper\">' +\r\n                                        '<div class=\"commentTrigger\">' +\r\n                                            `<div class=\"avatar\"><img class=\"visitor_avatar lazyload\" data-src=\"${`${GravatarBaseUrl + DefaultEmailHash}?size=80`}\"></div>` +\r\n                                            `<div class=\"trigger_title\">${root.placeholder}</div>` +\r\n                                        '</div>' +\r\n                                        '<div class=\"veditor-area\">' +\r\n                                            '<textarea placeholder=\"\" class=\"veditor\"></textarea>' +\r\n                                            '<div class=\"btn-wrap\">' +\r\n                                                `<div class=\"vpreview-btn vfunction-btn\" title=\"${root.i18n.preview}\">` +\r\n\t\t\t\t\t\t\t\t\t\t\t\t'<svg t=\"1551146416896\" class=\"icon\" style=\"\" viewBox=\"0 0 1024 1024\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" p-id=\"2051\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" width=\"1.5em\" height=\"1.5em\"><defs><style type=\"text/css\"></style></defs><path d=\"M862.516 161.07l44.62 44.38-286.303 288.866-45.668-45.615L862.516 161.07z m1.233 1.233\" p-id=\"2052\"></path><path d=\"M832.162 959.558H128.025V191.784h512.099v64.169H192.037V895.64h576.112V512.127h64.012v447.431z m0.833 0.533\" p-id=\"2053\"></path><path d=\"M256.05 703.994h384.075v63.919H256.05v-63.919z m0-127.769l320.062-0.069v63.919H256.05v-63.85z m0-128.317h192.037v63.891l-192.037 0.028v-63.919z m0 0\" p-id=\"2054\"></path></svg></div>' +\r\n                                                `<div class=\"vemoji-btn vfunction-btn\" title=\"${root.i18n.emoji}\">` +\r\n\t\t\t\t\t\t\t\t\t\t\t\t'<svg t=\"1551146424708\" class=\"icon\" style=\"\" viewBox=\"0 0 1024 1024\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" p-id=\"2169\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" width=\"1.5em\" height=\"1.5em\"><defs><style type=\"text/css\"></style></defs><path d=\"M513.028 63.766c-247.628 0-448.369 200.319-448.369 447.426S265.4 958.617 513.028 958.617s448.369-200.319 448.369-447.426S760.655 63.766 513.028 63.766z m-0.203 823.563c-207.318 0-375.382-167.71-375.382-374.592s168.064-374.592 375.382-374.592 375.382 167.71 375.382 374.592-168.064 374.592-375.382 374.592z\" p-id=\"2170\"></path><path d=\"M514.029 767.816c-99.337 0-188.031-54.286-251.889-146.146-10.647-16.703-7.1-33.399 7.094-45.93 14.192-12.529 28.384-8.349 39.025 8.349 49.67 75.164 124.174 116.92 205.77 116.92s163.199-45.93 209.316-125.268c10.647-16.703 24.833-16.703 39.025-8.349 14.194 12.524 14.194 29.227 7.094 45.93-60.312 96.035-152.553 154.494-255.435 154.494zM464.292 402.959l-45.151-45.151-0.05 0.05-90.45-90.45-45.15 45.15 90.45 90.45-90.45 90.451 45.15 45.15 90.45-90.45 0.05 0.05 45.151-45.151-0.05-0.05zM556.611 402.959l45.151-45.151 0.05 0.05 90.45-90.45 45.15 45.15-90.45 90.45 90.45 90.451-45.15 45.15-90.45-90.45-0.05 0.05-45.151-45.151 0.05-0.05z\" p-id=\"2171\"></path></svg></div>' +\r\n                                            '</div>' +\r\n                                        '</div>' +\r\n                                        '<div class=\"vextra-area\">' +\r\n                                            '<div class=\"vsmile-icons\" style=\"display:none\"></div>' +\r\n                                            '<div class=\"vpreview-text\" style=\"display:none\"></div>' +\r\n                                        '</div>' +\r\n                                    '</div>' +\r\n                                    '<section class=\"auth-section\" style=\"display:none;\">' +\r\n                                        `<div class=\"input-wrapper\"><input type=\"text\" name=\"author\" class=\"vnick\" placeholder=\"${root.i18n.nick}\" value=\"\"></div>` +\r\n                                        `<div class=\"input-wrapper\"><input type=\"email\" name=\"email\" class=\"vmail\" placeholder=\"${root.i18n.mail}\" value=\"\"></div>` +\r\n                                        `<div class=\"input-wrapper\"><input type=\"text\" name=\"website\" class=\"vlink\" placeholder=\"${root.i18n.link}\" value=\"\"></div>` +\r\n                                        `<div class=\"post-action\"><button type=\"button\" class=\"vsubmit\">${root.i18n.reply}</button></div>` +\r\n                                    '</section>' +\r\n                                    '<div style=\"display:none;\" class=\"vmark\"></div>' +\r\n                                '</div>' +\r\n                                '<div class=\"vsubmitting\" style=\"display:none;\"></div>' +\r\n                            '</div>' +\r\n                           '</div>' +\r\n                           '<div class=\"info\">' +\r\n                                `<div class=\"col\"> ${format(root.i18n.commentCount, '<span class=\"count\">0</span>')}</div>` +\r\n                           '</div>' +\r\n                           '<ul class=\"vlist\"><li class=\"vempty\"></li></ul>' +\r\n                           '<div class=\"vloading\"></div>' +\r\n                           '<div class=\"vpage txt-center\"></div>'\r\n  return HTML\r\n}\r\nmodule.exports = ele\n","void function(global) {\n\n  'use strict';\n\n  //  ValueError :: String -> Error\n  function ValueError(message) {\n    var err = new Error(message);\n    err.name = 'ValueError';\n    return err;\n  }\n\n  //  create :: Object -> String,*... -> String\n  function create(transformers) {\n    return function(template) {\n      var args = Array.prototype.slice.call(arguments, 1);\n      var idx = 0;\n      var state = 'UNDEFINED';\n\n      return template.replace(\n        /([{}])\\1|[{](.*?)(?:!(.+?))?[}]/g,\n        function(match, literal, _key, xf) {\n          if (literal != null) {\n            return literal;\n          }\n          var key = _key;\n          if (key.length > 0) {\n            if (state === 'IMPLICIT') {\n              throw ValueError('cannot switch from ' +\n                               'implicit to explicit numbering');\n            }\n            state = 'EXPLICIT';\n          } else {\n            if (state === 'EXPLICIT') {\n              throw ValueError('cannot switch from ' +\n                               'explicit to implicit numbering');\n            }\n            state = 'IMPLICIT';\n            key = String(idx);\n            idx += 1;\n          }\n\n          //  1.  Split the key into a lookup path.\n          //  2.  If the first path component is not an index, prepend '0'.\n          //  3.  Reduce the lookup path to a single result. If the lookup\n          //      succeeds the result is a singleton array containing the\n          //      value at the lookup path; otherwise the result is [].\n          //  4.  Unwrap the result by reducing with '' as the default value.\n          var path = key.split('.');\n          var value = (/^\\d+$/.test(path[0]) ? path : ['0'].concat(path))\n            .reduce(function(maybe, key) {\n              return maybe.reduce(function(_, x) {\n                return x != null && key in Object(x) ?\n                  [typeof x[key] === 'function' ? x[key]() : x[key]] :\n                  [];\n              }, []);\n            }, [args])\n            .reduce(function(_, x) { return x; }, '');\n\n          if (xf == null) {\n            return value;\n          } else if (Object.prototype.hasOwnProperty.call(transformers, xf)) {\n            return transformers[xf](value);\n          } else {\n            throw ValueError('no transformer named \"' + xf + '\"');\n          }\n        }\n      );\n    };\n  }\n\n  //  format :: String,*... -> String\n  var format = create({});\n\n  //  format.create :: Object -> String,*... -> String\n  format.create = create;\n\n  //  format.extend :: Object,Object -> ()\n  format.extend = function(prototype, transformers) {\n    var $format = create(transformers);\n    prototype.format = function() {\n      var args = Array.prototype.slice.call(arguments);\n      args.unshift(this);\n      return $format.apply(global, args);\n    };\n  };\n\n  /* istanbul ignore else */\n  if (typeof module !== 'undefined') {\n    module.exports = format;\n  } else if (typeof define === 'function' && define.amd) {\n    define(function() { return format; });\n  } else {\n    global.format = format;\n  }\n\n}.call(this, this);\n","import Config from './Config'\r\nimport i18n from './i18n'\r\nimport ajax from './ajax'\r\nimport GetIP from './GetIP'\r\nimport setAV from './setAV'\r\nimport dom from './dom'\r\nimport MathJaxSupport from './MathJax'\r\nimport check from './check'\r\nimport smile from './smile'\r\nimport script from './script'\r\nimport MakeComment from './MakeComment'\r\n\r\nmodule.exports = {\r\n  Config: Config,\r\n  i18n: i18n,\r\n  ajax: ajax,\r\n  GetIP: GetIP,\r\n  setAV: setAV,\r\n  dom: dom,\r\n  MathJaxSupport: MathJaxSupport,\r\n  check: check,\r\n  smile: smile,\r\n  script: script,\r\n  MakeComment: MakeComment\r\n\r\n}\n","import { MaxNestLevel, PageSize, EmoticonUrl, Comment } from '../Default'\r\n\r\nconst Config = function (root) {\r\n  root.emoticonUrl = root.config.emoticonUrl || EmoticonUrl\r\n  root.lang = root.config.lang || navigator.language || navigator.userLanguage\r\n  root.maxNestLevel = root.config.maxNest || MaxNestLevel\r\n  root.pageSize = root.config.pageSize || PageSize\r\n  root.adminEmailMd5 = root.config.adminEmailMd5 || ''\r\n  root.math = root.config.math\r\n  root.md = root.config.md\r\n  root.placeholder = root.config.placeholder || ''\r\n  root.Comment = Comment\r\n  root.Comment.url = root.config.pathname || location.pathname.replace(/\\/$/, '')\r\n}\r\nmodule.exports = Config\n","import { i18nUrl } from '../Default'\r\nimport ajax from './ajax'\r\n\r\nconst i18n = (root) => {\r\n  ajax({\r\n    url: i18nUrl + root.lang + '/index.json',\r\n    type: 'GET',\r\n    success: function (data) {\r\n      data = eval('(' + data + ')')\r\n      root.i18n = data\r\n    }\r\n  })\r\n}\r\nmodule.exports = i18n\n","const GetIP = (root) => {\r\n  window.getIP = (json) => {\r\n    root.Comment.ip = json.ip\r\n  }\r\n}\r\n\r\nmodule.exports = GetIP\n","const setAV = function (root) {\r\n  // set serverURLs\r\n  let prefix = 'https://'\r\n  let serverURLs = ''\r\n  if (!root.config.serverURLs) {\r\n    switch (root.config.appId.slice(-9)) {\r\n      // TAB\r\n      case '-9Nh9j0Va':\r\n        prefix += 'tab.'\r\n        break\r\n        // US\r\n      case '-MdYXbMMI':\r\n        prefix += 'us.'\r\n        break\r\n      default:\r\n        break\r\n    }\r\n  }\r\n  serverURLs = root.config.serverURLs || `${prefix}avoscloud.com`\r\n\r\n  if (typeof window.disableAVInit === 'undefined') {\r\n    AV.init({\r\n      appId: root.config.appId,\r\n      appKey: root.config.appKey,\r\n      serverURLs\r\n    })\r\n    window.disableAVInit = true\r\n  }\r\n  root.v = AV\r\n}\r\nmodule.exports = setAV\n","const utils = {\r\n  on (type, el, handler, capture) {\r\n    type = type.split(' ')\r\n    for (let i = 0, len = type.length; i < len; i++) {\r\n      utils.off(type[i], el, handler, capture)\r\n      if (el.addEventListener) el.addEventListener(type[i], handler, capture || false)\r\n      else if (el.attachEvent) el.attachEvent(`on${type[i]}`, handler)\r\n      else el[`on${type[i]}`] = handler\r\n    }\r\n  },\r\n  off (type, el, handler, capture) {\r\n    type = type.split(' ')\r\n    for (let i = 0, len = type.length; i < len; i++) {\r\n      if (el.removeEventListener) el.removeEventListener(type, handler, capture || false)\r\n      else if (el.detachEvent) el.detachEvent(`on${type}`, handler)\r\n      else el[`on${type}`] = null\r\n    }\r\n  }\r\n}\r\nmodule.exports = utils\n","const MathJaxSupport = (root) => {\r\n  if ((typeof MathJax === 'undefined') && (root.math || typeof root.config.math == 'undefined')) {\r\n    import('./initMathJax.js').then(({ initMathJax }) => {\r\n      initMathJax()\r\n    })\r\n  }\r\n  if (typeof MathJax !== 'undefined') {\r\n    MathJax.Hub.Typeset(document.getElementsByClassName('MiniValine'))\r\n  }\r\n}\r\nmodule.exports = MathJaxSupport\n","const check = {\r\n  mail (m) {\r\n    return {\r\n      k: /\\w[-\\w.+]*@([A-Za-z0-9][-A-Za-z0-9]+\\.)+[A-Za-z]{2,14}/.test(m),\r\n      v: m\r\n    }\r\n  },\r\n  link (l) {\r\n    if (l.length > 0) {\r\n      l = /^(http|https)/.test(l) ? l : `http://${l}`\r\n    }\r\n    return {\r\n      k:\r\n        l.length > 0\r\n          ? /(http|https):\\/\\/[\\w\\-_]+(\\.[\\w\\-_]+)+([\\w\\-\\.,@?^=%&amp;:/~\\+#]*[\\w\\-\\@?^=%&amp;/~\\+#])?/.test(\r\n            l\r\n          )\r\n          : true,\r\n      v: l\r\n    }\r\n  }\r\n}\r\nmodule.exports = check\n","import { EmoticonUrl } from '../Default'\r\nimport ajax from './ajax'\r\n\r\nconst smile = (root) => {\r\n  ajax({\r\n    url: EmoticonUrl + '/index.json',\r\n    type: 'GET',\r\n    success: function (data) {\r\n      data = eval('(' + data + ')')\r\n      root.emoticonList = data[0]\r\n    }\r\n  })\r\n}\r\nmodule.exports = smile\n","import { AVSdkUrl, MD5, lazysizes, ip } from '../Default'\r\nconst script = (root) => {\r\n  getScript(AVSdkUrl)\r\n  getScript(MD5)\r\n  getScript(lazysizes)\r\n  getScript(ip)\r\n}\r\nconst getScript = (src) => {\r\n  var script = document.createElement('script')\r\n  script.type = 'text/javascript'\r\n  script.src = src\r\n  document.head.append(script)\r\n}\r\nmodule.exports = script\n","import xss from 'xss'\r\n\r\nconst MakeComment = (root) => {\r\n  var tmp = root.Comment.comment.replace(/!\\(:(.*?\\.\\w+):\\)/g, `<img src=\"${root.emoticonUrl}/$1\" alt=\"$1\" class=\"vemoticon-img\">`)\r\n  tmp = xss(tmp, {\n    onIgnoreTagAttr (tag, name, value, isWhiteAttr) {\r\n      if (name === 'class') {\r\n        return `${name}=\"${xss.escapeAttrValue(value)}\"`\r\n      }\r\n    }\r\n  }\r\n  )\r\n  return tmp\r\n}\r\n\r\nmodule.exports = MakeComment\r\n","/**\n * xss\n *\n * @author Zongmin Lei<leizongmin@gmail.com>\n */\n\nvar DEFAULT = require(\"./default\");\nvar parser = require(\"./parser\");\nvar FilterXSS = require(\"./xss\");\n\n/**\n * filter xss function\n *\n * @param {String} html\n * @param {Object} options { whiteList, onTag, onTagAttr, onIgnoreTag, onIgnoreTagAttr, safeAttrValue, escapeHtml }\n * @return {String}\n */\nfunction filterXSS(html, options) {\n  var xss = new FilterXSS(options);\n  return xss.process(html);\n}\n\nexports = module.exports = filterXSS;\nexports.filterXSS = filterXSS;\nexports.FilterXSS = FilterXSS;\nfor (var i in DEFAULT) exports[i] = DEFAULT[i];\nfor (var i in parser) exports[i] = parser[i];\n\n// using `xss` on the browser, output `filterXSS` to the globals\nif (typeof window !== \"undefined\") {\n  window.filterXSS = module.exports;\n}\n\n// using `xss` on the WebWorker, output `filterXSS` to the globals\nfunction isWorkerEnv() {\n  return typeof self !== 'undefined' && typeof DedicatedWorkerGlobalScope !== 'undefined' && self instanceof DedicatedWorkerGlobalScope;\n}\nif (isWorkerEnv()) {\n  self.filterXSS = module.exports;\n}\n","/**\n * cssfilter\n *\n * @author <leizongmin@gmail.com>\n */\n\nvar DEFAULT = require('./default');\nvar parseStyle = require('./parser');\nvar _ = require('./util');\n\n\n/**\n * \n *\n * @param {Object} obj\n * @return {Boolean}\n */\nfunction isNull (obj) {\n  return (obj === undefined || obj === null);\n}\n\n/**\n * \n *\n * @param {Object} obj\n * @return {Object}\n */\nfunction shallowCopyObject (obj) {\n  var ret = {};\n  for (var i in obj) {\n    ret[i] = obj[i];\n  }\n  return ret;\n}\n\n/**\n * CSS\n *\n * @param {Object} options\n *   - {Object} whiteList\n *   - {Function} onAttr\n *   - {Function} onIgnoreAttr\n *   - {Function} safeAttrValue\n */\nfunction FilterCSS (options) {\n  options = shallowCopyObject(options || {});\n  options.whiteList = options.whiteList || DEFAULT.whiteList;\n  options.onAttr = options.onAttr || DEFAULT.onAttr;\n  options.onIgnoreAttr = options.onIgnoreAttr || DEFAULT.onIgnoreAttr;\n  options.safeAttrValue = options.safeAttrValue || DEFAULT.safeAttrValue;\n  this.options = options;\n}\n\nFilterCSS.prototype.process = function (css) {\n  // \n  css = css || '';\n  css = css.toString();\n  if (!css) return '';\n\n  var me = this;\n  var options = me.options;\n  var whiteList = options.whiteList;\n  var onAttr = options.onAttr;\n  var onIgnoreAttr = options.onIgnoreAttr;\n  var safeAttrValue = options.safeAttrValue;\n\n  var retCSS = parseStyle(css, function (sourcePosition, position, name, value, source) {\n\n    var check = whiteList[name];\n    var isWhite = false;\n    if (check === true) isWhite = check;\n    else if (typeof check === 'function') isWhite = check(value);\n    else if (check instanceof RegExp) isWhite = check.test(value);\n    if (isWhite !== true) isWhite = false;\n\n    //  value \n    value = safeAttrValue(name, value);\n    if (!value) return;\n\n    var opts = {\n      position: position,\n      sourcePosition: sourcePosition,\n      source: source,\n      isWhite: isWhite\n    };\n\n    if (isWhite) {\n\n      var ret = onAttr(name, value, opts);\n      if (isNull(ret)) {\n        return name + ':' + value;\n      } else {\n        return ret;\n      }\n\n    } else {\n\n      var ret = onIgnoreAttr(name, value, opts);\n      if (!isNull(ret)) {\n        return ret;\n      }\n\n    }\n  });\n\n  return retCSS;\n};\n\n\nmodule.exports = FilterCSS;\n","/**\n * cssfilter\n *\n * @author <leizongmin@gmail.com>\n */\n\nvar _ = require('./util');\n\n\n/**\n * style\n *\n * @param {String} css\n * @param {Function} onAttr \n *    function (sourcePosition, position, name, value, source)\n * @return {String}\n */\nfunction parseStyle (css, onAttr) {\n  css = _.trimRight(css);\n  if (css[css.length - 1] !== ';') css += ';';\n  var cssLength = css.length;\n  var isParenthesisOpen = false;\n  var lastPos = 0;\n  var i = 0;\n  var retCSS = '';\n\n  function addNewAttr () {\n    // \n    if (!isParenthesisOpen) {\n      var source = _.trim(css.slice(lastPos, i));\n      var j = source.indexOf(':');\n      if (j !== -1) {\n        var name = _.trim(source.slice(0, j));\n        var value = _.trim(source.slice(j + 1));\n        // \n        if (name) {\n          var ret = onAttr(lastPos, retCSS.length, name, value, source);\n          if (ret) retCSS += ret + '; ';\n        }\n      }\n    }\n    lastPos = i + 1;\n  }\n\n  for (; i < cssLength; i++) {\n    var c = css[i];\n    if (c === '/' && css[i + 1] === '*') {\n      // \n      var j = css.indexOf('*/', i + 2);\n      // \n      if (j === -1) break;\n      // \n      i = j + 1;\n      lastPos = i + 1;\n      isParenthesisOpen = false;\n    } else if (c === '(') {\n      isParenthesisOpen = true;\n    } else if (c === ')') {\n      isParenthesisOpen = false;\n    } else if (c === ';') {\n      if (isParenthesisOpen) {\n        // \n      } else {\n        addNewAttr();\n      }\n    } else if (c === '\\n') {\n      addNewAttr();\n    }\n  }\n\n  return _.trim(retCSS);\n}\n\nmodule.exports = parseStyle;\n","/**\n * filter xss\n *\n * @author Zongmin Lei<leizongmin@gmail.com>\n */\n\nvar FilterCSS = require(\"cssfilter\").FilterCSS;\nvar DEFAULT = require(\"./default\");\nvar parser = require(\"./parser\");\nvar parseTag = parser.parseTag;\nvar parseAttr = parser.parseAttr;\nvar _ = require(\"./util\");\n\n/**\n * returns `true` if the input value is `undefined` or `null`\n *\n * @param {Object} obj\n * @return {Boolean}\n */\nfunction isNull(obj) {\n  return obj === undefined || obj === null;\n}\n\n/**\n * get attributes for a tag\n *\n * @param {String} html\n * @return {Object}\n *   - {String} html\n *   - {Boolean} closing\n */\nfunction getAttrs(html) {\n  var i = _.spaceIndex(html);\n  if (i === -1) {\n    return {\n      html: \"\",\n      closing: html[html.length - 2] === \"/\"\n    };\n  }\n  html = _.trim(html.slice(i + 1, -1));\n  var isClosing = html[html.length - 1] === \"/\";\n  if (isClosing) html = _.trim(html.slice(0, -1));\n  return {\n    html: html,\n    closing: isClosing\n  };\n}\n\n/**\n * shallow copy\n *\n * @param {Object} obj\n * @return {Object}\n */\nfunction shallowCopyObject(obj) {\n  var ret = {};\n  for (var i in obj) {\n    ret[i] = obj[i];\n  }\n  return ret;\n}\n\n/**\n * FilterXSS class\n *\n * @param {Object} options\n *        whiteList, onTag, onTagAttr, onIgnoreTag,\n *        onIgnoreTagAttr, safeAttrValue, escapeHtml\n *        stripIgnoreTagBody, allowCommentTag, stripBlankChar\n *        css{whiteList, onAttr, onIgnoreAttr} `css=false` means don't use `cssfilter`\n */\nfunction FilterXSS(options) {\n  options = shallowCopyObject(options || {});\n\n  if (options.stripIgnoreTag) {\n    if (options.onIgnoreTag) {\n      console.error(\n        'Notes: cannot use these two options \"stripIgnoreTag\" and \"onIgnoreTag\" at the same time'\n      );\n    }\n    options.onIgnoreTag = DEFAULT.onIgnoreTagStripAll;\n  }\n\n  options.whiteList = options.whiteList || DEFAULT.whiteList;\n  options.onTag = options.onTag || DEFAULT.onTag;\n  options.onTagAttr = options.onTagAttr || DEFAULT.onTagAttr;\n  options.onIgnoreTag = options.onIgnoreTag || DEFAULT.onIgnoreTag;\n  options.onIgnoreTagAttr = options.onIgnoreTagAttr || DEFAULT.onIgnoreTagAttr;\n  options.safeAttrValue = options.safeAttrValue || DEFAULT.safeAttrValue;\n  options.escapeHtml = options.escapeHtml || DEFAULT.escapeHtml;\n  this.options = options;\n\n  if (options.css === false) {\n    this.cssFilter = false;\n  } else {\n    options.css = options.css || {};\n    this.cssFilter = new FilterCSS(options.css);\n  }\n}\n\n/**\n * start process and returns result\n *\n * @param {String} html\n * @return {String}\n */\nFilterXSS.prototype.process = function(html) {\n  // compatible with the input\n  html = html || \"\";\n  html = html.toString();\n  if (!html) return \"\";\n\n  var me = this;\n  var options = me.options;\n  var whiteList = options.whiteList;\n  var onTag = options.onTag;\n  var onIgnoreTag = options.onIgnoreTag;\n  var onTagAttr = options.onTagAttr;\n  var onIgnoreTagAttr = options.onIgnoreTagAttr;\n  var safeAttrValue = options.safeAttrValue;\n  var escapeHtml = options.escapeHtml;\n  var cssFilter = me.cssFilter;\n\n  // remove invisible characters\n  if (options.stripBlankChar) {\n    html = DEFAULT.stripBlankChar(html);\n  }\n\n  // remove html comments\n  if (!options.allowCommentTag) {\n    html = DEFAULT.stripCommentTag(html);\n  }\n\n  // if enable stripIgnoreTagBody\n  var stripIgnoreTagBody = false;\n  if (options.stripIgnoreTagBody) {\n    var stripIgnoreTagBody = DEFAULT.StripTagBody(\n      options.stripIgnoreTagBody,\n      onIgnoreTag\n    );\n    onIgnoreTag = stripIgnoreTagBody.onIgnoreTag;\n  }\n\n  var retHtml = parseTag(\n    html,\n    function(sourcePosition, position, tag, html, isClosing) {\n      var info = {\n        sourcePosition: sourcePosition,\n        position: position,\n        isClosing: isClosing,\n        isWhite: whiteList.hasOwnProperty(tag)\n      };\n\n      // call `onTag()`\n      var ret = onTag(tag, html, info);\n      if (!isNull(ret)) return ret;\n\n      if (info.isWhite) {\n        if (info.isClosing) {\n          return \"</\" + tag + \">\";\n        }\n\n        var attrs = getAttrs(html);\n        var whiteAttrList = whiteList[tag];\n        var attrsHtml = parseAttr(attrs.html, function(name, value) {\n          // call `onTagAttr()`\n          var isWhiteAttr = _.indexOf(whiteAttrList, name) !== -1;\n          var ret = onTagAttr(tag, name, value, isWhiteAttr);\n          if (!isNull(ret)) return ret;\n\n          if (isWhiteAttr) {\n            // call `safeAttrValue()`\n            value = safeAttrValue(tag, name, value, cssFilter);\n            if (value) {\n              return name + '=\"' + value + '\"';\n            } else {\n              return name;\n            }\n          } else {\n            // call `onIgnoreTagAttr()`\n            var ret = onIgnoreTagAttr(tag, name, value, isWhiteAttr);\n            if (!isNull(ret)) return ret;\n            return;\n          }\n        });\n\n        // build new tag html\n        var html = \"<\" + tag;\n        if (attrsHtml) html += \" \" + attrsHtml;\n        if (attrs.closing) html += \" /\";\n        html += \">\";\n        return html;\n      } else {\n        // call `onIgnoreTag()`\n        var ret = onIgnoreTag(tag, html, info);\n        if (!isNull(ret)) return ret;\n        return escapeHtml(html);\n      }\n    },\n    escapeHtml\n  );\n\n  // if enable stripIgnoreTagBody\n  if (stripIgnoreTagBody) {\n    retHtml = stripIgnoreTagBody.remove(retHtml);\n  }\n\n  return retHtml;\n};\n\nmodule.exports = FilterXSS;\n"],"sourceRoot":""}