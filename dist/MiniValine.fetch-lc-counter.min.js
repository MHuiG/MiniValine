(self.webpackChunkMiniValine=self.webpackChunkMiniValine||[]).push([[643],{1882:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Counter=function(){n(AV.Object.extend("Counter"))};var n=function(e){try{var t=document.querySelectorAll(".leancloud_visitors,.leancloud-visitors");c(e,t,0);var n=document.querySelectorAll(".leancloud_pv,.leancloud-pv");c(e,n,1)}catch(e){console.error(e)}},c=function(e,t,n){if(t.length){var c=t[0],l=c.id,o=n?"PV":c.attributes["data-flag-title"].value,r=encodeURI(l),u={el:c,url:l,xid:r,title:o},s=new AV.Query(e);s.equalTo("url",l),s.find().then((function(t){if(t.length>0){var n=t[0];n.increment("time"),n.save().then((function(e){c.querySelector(".leancloud-visitors-count").innerText=e.get("time")})).catch((function(e){console.error(e)}))}else i(e,u)})).catch((function(t){101==t.code&&i(e,u)}))}},i=function(e,t){var n=new e,c=new AV.ACL;c.setPublicReadAccess(!0),c.setPublicWriteAccess(!0),n.setACL(c),n.set("url",t.url),n.set("xid",t.xid),n.set("title",t.title),n.set("time",1),n.save().then((function(e){t.el.querySelector(".leancloud-visitors-count").innerText=1})).catch((function(e){console.error(e)}))}}}]);