(window.webpackJsonpMiniValine=window.webpackJsonpMiniValine||[]).push([[8],{109:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Counter=function(){c(AV.Object.extend("Counter"))};var c=function(e){try{var t=document.querySelectorAll(".leancloud_visitors,.leancloud-visitors");i(e,t,0);var n=document.querySelectorAll(".leancloud_pv,.leancloud-pv");i(e,n,1)}catch(e){console.log(e)}},i=function(e,t,n){if(t.length){var c=t[0],i=c.id,l=n?"PV":c.attributes["data-flag-title"].value,u=encodeURI(i),r={el:c,url:i,xid:u,title:l},s=new AV.Query(e);s.equalTo("url",i),s.find().then((function(t){if(t.length>0){var n=t[0];n.increment("time"),n.save().then((function(e){c.querySelector(".leancloud-visitors-count").innerText=e.get("time")})).catch((function(e){console.log(e)}))}else o(e,r)})).catch((function(t){101==t.code&&o(e,r)}))}},o=function(e,t){var n=new e,c=new AV.ACL;c.setPublicReadAccess(!0),c.setPublicWriteAccess(!0),n.setACL(c),n.set("url",t.url),n.set("xid",t.xid),n.set("title",t.title),n.set("time",1),n.save().then((function(e){t.el.querySelector(".leancloud-visitors-count").innerText=1})).catch((function(e){console.log(e)}))}}}]);