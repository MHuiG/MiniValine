(self.webpackChunkMiniValine=self.webpackChunkMiniValine||[]).push([[643],{1882:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Counter=function(){n(AV.Object.extend("Counter"))};var n=function(e){try{var t=document.querySelectorAll(".leancloud_visitors,.leancloud-visitors");l(e,t,0);var n=document.querySelectorAll(".leancloud_pv,.leancloud-pv");l(e,n,1)}catch(e){console.log(e)}},l=function(e,t,n){if(t.length){var l=t[0],i=l.id,o=n?"PV":l.attributes["data-flag-title"].value,u=encodeURI(i),r={el:l,url:i,xid:u,title:o},s=new AV.Query(e);s.equalTo("url",i),s.find().then((function(t){if(t.length>0){var n=t[0];n.increment("time"),n.save().then((function(e){l.querySelector(".leancloud-visitors-count").innerText=e.get("time")})).catch((function(e){console.log(e)}))}else c(e,r)})).catch((function(t){101==t.code&&c(e,r)}))}},c=function(e,t){var n=new e,l=new AV.ACL;l.setPublicReadAccess(!0),l.setPublicWriteAccess(!0),n.setACL(l),n.set("url",t.url),n.set("xid",t.xid),n.set("title",t.title),n.set("time",1),n.save().then((function(e){t.el.querySelector(".leancloud-visitors-count").innerText=1})).catch((function(e){console.log(e)}))}}}]);